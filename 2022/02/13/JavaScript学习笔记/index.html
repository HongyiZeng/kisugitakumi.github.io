<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JavaScript学习笔记 | Kisugi Takumi</title><meta name="keywords" content="前端学习,JavaScript"><meta name="author" content="Kisugi Takumi,zenghongyi1@google.com"><meta name="copyright" content="Kisugi Takumi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JavaScript 是 Web 的编程语言。所有现代的 HTML 页面都使用 JavaScript。">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript学习笔记">
<meta property="og:url" content="https://kisugitakumi.github.io/2022/02/13/JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Kisugi Takumi">
<meta property="og:description" content="JavaScript 是 Web 的编程语言。所有现代的 HTML 页面都使用 JavaScript。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://kisugitakumi.github.io/img/javascript.png">
<meta property="article:published_time" content="2022-02-13T02:09:25.000Z">
<meta property="article:modified_time" content="2022-02-26T09:49:48.924Z">
<meta property="article:author" content="Kisugi Takumi">
<meta property="article:tag" content="前端学习">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kisugitakumi.github.io/img/javascript.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://kisugitakumi.github.io/2022/02/13/JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Kisugi Takumi","link":"链接: ","source":"来源: Kisugi Takumi","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaScript学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-26 17:49:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">93</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">65</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-brain"></i><span> 我的豆瓣</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fab fa-steam-square"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/create/"><i class="fa-fw fas fa-user-edit"></i><span> 我的创作</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-kiss-wink-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Kisugi Takumi</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-brain"></i><span> 我的豆瓣</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fab fa-steam-square"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/create/"><i class="fa-fw fas fa-user-edit"></i><span> 我的创作</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-kiss-wink-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">JavaScript学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-13T02:09:25.000Z" title="发表于 2022-02-13 10:09:25">2022-02-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-26T09:49:48.924Z" title="更新于 2022-02-26 17:49:48">2022-02-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/">前端学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">19.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>72分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaScript学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="JavaScript学习笔记"><a href="#JavaScript学习笔记" class="headerlink" title="JavaScript学习笔记"></a>JavaScript学习笔记</h1><p>学习来源：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1p4411u7TT">尚硅谷</a></p>
<p>学习时间：2022年2月13日</p>
<p>注：基础篇内容较简略，只对重点内容做笔记</p>
<p>1-6为基础篇内容，6以后为高级篇内容</p>
<h2 id="0-补充知识"><a href="#0-补充知识" class="headerlink" title="0 补充知识"></a>0 补充知识</h2><h3 id="0-1-DOM和BOM"><a href="#0-1-DOM和BOM" class="headerlink" title="0.1 DOM和BOM"></a>0.1 DOM和BOM</h3><h4 id="0-1-1-JS组成"><a href="#0-1-1-JS组成" class="headerlink" title="0.1.1 JS组成"></a>0.1.1 JS组成</h4><p>JavaScript的实现包括以下3个部分：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ECMAScript(核心)</th>
<th>描述了JS的语法和基本对象。</th>
</tr>
</thead>
<tbody>
<tr>
<td>文档对象模型 （DOM）</td>
<td>处理网页内容的方法和接口</td>
</tr>
<tr>
<td>浏览器对象模型（BOM）</td>
<td>与浏览器交互的方法和接口</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>DOM 是 W3C 的标准；[所有浏览器<strong>公共遵守</strong>的标准]</li>
<li>BOM 是 各个浏览器厂商根据 DOM在各自浏览器上的实现；[表现为不同浏览器定义有差别，实现方式不同]</li>
<li>window 是 BOM 对象，而非 js 对象；javacsript是通过访问BOM（Browser Object Model）对象来访问、控制、修改客户端（浏览器）</li>
</ol>
<blockquote>
<p>ECMAScript</p>
</blockquote>
<ol>
<li>ECMAScript是一个标准，JS只是它的一个实现，其他实现包括ActionScript。</li>
<li>“ECMAScript可以为不同种类的宿主环境提供核心的脚本编程能力……”，即ECMAScript不与具体的宿主环境相绑定，如JS的宿主环境是浏览器，AS的宿主环境是Flash。</li>
<li>ECMAScript描述了以下内容：语法、类型、语句、关键字、保留字、运算符、对象。</li>
</ol>
<h4 id="0-1-2-DOM-DOCUMENT-BOM-WINDOW的区别"><a href="#0-1-2-DOM-DOCUMENT-BOM-WINDOW的区别" class="headerlink" title="0.1.2 DOM DOCUMENT BOM WINDOW的区别"></a>0.1.2 DOM DOCUMENT BOM WINDOW的区别</h4><ul>
<li>DOM 是为了<strong>操作文档</strong>出现的 API，document 是其的一个对象；</li>
<li>BOM 是为了<strong>操作浏览器</strong>出现的 API，window 是其的一个对象。</li>
</ul>
<p>BOM是浏览器对象模型，DOM是文档对象模型，前者是对浏览器本身进行操作，而后者是对浏览器（可看成容器）内的内容进行操作。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213135449156.png" alt="image-20220213135449156"></p>
<p>以上图为例：</p>
<p>DOM管理的：</p>
<ul>
<li>E区（document。由web开发人员呕心沥血写出来的一个文件夹，里面有index.html，CSS和JS什么鬼的，部署在服务器上，我们可以通过浏览器的地址栏输入URL然后回车将这个document加载到本地，浏览，右键查看源代码等。）</li>
</ul>
<p>BOM管理的：</p>
<ul>
<li>A区（浏览器的标签页，地址栏，搜索栏，书签栏，窗口放大还原关闭按钮，菜单栏等等）</li>
<li>B区（浏览器的右键菜单）</li>
<li>C区（document加载时的状态栏，显示http状态码等）</li>
<li>D区（滚动条scroll bar）</li>
</ul>
<h2 id="1-JS简介"><a href="#1-JS简介" class="headerlink" title="1 JS简介"></a>1 JS简介</h2><h3 id="1-1-标准实现"><a href="#1-1-标准实现" class="headerlink" title="1.1 标准实现"></a>1.1 标准实现</h3><p>为了确保不同的浏览器上运行的JavaScript标准一致，所以几个公司共同定制了JS的标准名命名为<code>ECMAScript</code>。</p>
<ul>
<li><p>ECMAScript是一个标准，而这个标准需要由各个浏览器厂商去实现</p>
</li>
<li><p>不同的浏览器厂商对该标准会有不同的实现</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>浏览器</th>
<th>JS实现方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>FireFox</td>
<td>SpiderMonkey</td>
</tr>
<tr>
<td>IE</td>
<td>Chakra</td>
</tr>
<tr>
<td>Safari</td>
<td>JavaScriptCore</td>
</tr>
<tr>
<td><strong>Chrome</strong></td>
<td><strong>V8</strong></td>
</tr>
<tr>
<td>Carakan</td>
<td>Carakan</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-2-三大组成"><a href="#1-2-三大组成" class="headerlink" title="1.2 三大组成"></a>1.2 三大组成</h3><p>我们已经知道ECMAScript是JavaScript标准，所以一般情况下这两个词我们认为是一个意思。但是实际上JavaScript的含义却要更大一些。</p>
<p>一个完整的JavaScript实现应该由以下三个部分构成：ECMAScript，DOM，BOM。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213124217207.png" alt="image-20220213124217207"></p>
<h3 id="1-3-特点"><a href="#1-3-特点" class="headerlink" title="1.3 特点"></a>1.3 特点</h3><ul>
<li>JS的特点<ul>
<li>解释型语言：JavaScript是一门解释型语言，所谓解释型值语言<strong>不需要被编译为机器码再执行</strong>，而是直接执行。</li>
<li>类似于 C 和 Java 的语法结构</li>
<li>动态语言</li>
<li>基于<strong>原型</strong>的面向对象</li>
</ul>
</li>
</ul>
<h2 id="2-基本语法"><a href="#2-基本语法" class="headerlink" title="2 基本语法"></a>2 基本语法</h2><h3 id="2-1-编写位置"><a href="#2-1-编写位置" class="headerlink" title="2.1 编写位置"></a>2.1 编写位置</h3><p>JS代码需要编写到<code>&lt;script&gt;</code>标签中。一般将script标签写到<code>head</code>中。</p>
<ul>
<li><p>标签属性</p>
<ul>
<li><p>type：默认值<code>text/javascript</code>，可以不写。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript">  </span></span><br><span class="line"><span class="javascript"><span class="comment">//编写js代码  </span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
</li>
<li><p>src：当需要引入一个外部的js文件时，使用该属性指向文件的地址。注意script标签一旦用于引入外部文件了，就不能在编写代码了，即使编写了浏览器也会忽略，如果需要则可以在创建一个新的script标签用于编写内部代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="comment">// 即使写js代码也会被忽略</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>对于分号，<strong>可加可不加</strong>，但要根据项目配置来添加分号，保持代码风格统一。</p>
<p>对于引号，一般情况下（没有嵌套）在js中单引号和双引号<strong>作用是一样的</strong>，可凭自己习惯使用，建议养成只使用一种的习惯，有利于代码统一性及可维护。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以下三种用法均可</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Hello&quot;</span> + <span class="string">&#x27;World&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>碰到嵌套的时候才会同时用两种引号，规则是外层如果是单引号，内层就是双引号，如果想要在引号内引用变量，则需要跟外层的符号一致。</p>
<h3 id="2-2-变量"><a href="#2-2-变量" class="headerlink" title="2.2 变量"></a>2.2 变量</h3><p>变量的作用是给某一个值或对象标注名称。使用<code>var</code>关键字声明一个变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;Hongyi&quot;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-数据类型"><a href="#2-3-数据类型" class="headerlink" title="2.3 数据类型"></a>2.3 数据类型</h3><p>JavaScript中一共有5种<strong>基本</strong>数据类型：</p>
<ol>
<li>字符串型（<code>String</code>） </li>
<li>数值型（<code>Number</code>） </li>
<li>布尔型（<code>Boolean</code>） </li>
<li>空值（<code>Null</code>） </li>
<li>未定义（<code>Undefined</code>）</li>
</ol>
<p>这5种之外的类型都称为<code>Object</code>（对象，引用数据类型），所以总的来看JavaScript中共有六种数据类型。</p>
<p>可以使用<code>typeof</code>操作符来检查一个变量的数据类型。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="string">&quot;123&quot;</span>); <span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="number">123</span>); <span class="comment">// number</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">null</span>); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">undefined</span>); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="2-3-1-String"><a href="#2-3-1-String" class="headerlink" title="2.3.1 String"></a>2.3.1 String</h4><p>JS中的字符串需要使用引号引起来双引号或单引号都行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;Hongyi&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>字符串拼接使用<code>+</code>号。</p>
<p>在字符串中使用<code>\</code>作为转义字符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\&#x27;  ==&gt; &#x27;  </span><br><span class="line">\&quot;  ==&gt; &quot;  </span><br><span class="line">\n  ==&gt; 换行  </span><br><span class="line">\t  ==&gt; 制表符  </span><br><span class="line">\\  ==&gt; \	  </span><br></pre></td></tr></table></figure>
<h4 id="2-3-2-Number"><a href="#2-3-2-Number" class="headerlink" title="2.3.2 Number"></a>2.3.2 Number</h4><p>Number 类型用来表示整数和浮点数，最常用的功能就是用来表示10进制的整数和浮点数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>Number表示的数字大小是有限的，范围是：<code>± 1.7976931348623157e+308</code>，如果超过了这个范围，则会返回<code>± Infinity</code>。 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.MAX_VALUE = <span class="number">1.7976931348623157e+308</span>;</span><br></pre></td></tr></table></figure>
<p><code>NaN</code>，即非数值（Not a Number）是一个特殊的数值，JS中当对数值进行计算时没有结果返回，则返回NaN。</p>
<h4 id="2-3-3-Boolean"><a href="#2-3-3-Boolean" class="headerlink" title="2.3.3 Boolean"></a>2.3.3 Boolean</h4><p>布尔值主要用来进行逻辑判断，布尔值只有两个</p>
<ul>
<li><p>true 逻辑的真</p>
</li>
<li><p>false 逻辑的假</p>
</li>
</ul>
<p>使用typeof检查一个布尔值时，会返回<code>boolean</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag = <span class="literal">true</span>; </span><br></pre></td></tr></table></figure>
<h4 id="2-3-4-Null"><a href="#2-3-4-Null" class="headerlink" title="2.3.4 Null"></a>2.3.4 Null</h4><p>空值专门用来表示为空的对象，Null类型的值只有一个</p>
<ul>
<li>null</li>
</ul>
<p>注意：使用typeof检查一个Null类型的值时会返回<code>object</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a); <span class="comment">// object</span></span><br></pre></td></tr></table></figure>
<ul>
<li>从语义上看null表示的是一个空的对象。所以使用typeof检查null会返回一个Object。</li>
<li>undefined值实际上是由null值衍生出来的，所以如果比较undefined和null是否相等，会返回true；</li>
</ul>
<h4 id="2-3-5-Undefined"><a href="#2-3-5-Undefined" class="headerlink" title="2.3.5 Undefined"></a>2.3.5 Undefined</h4><p><strong>如果声明一个变量但是没有为变量赋值此时变量的值就是undefined</strong></p>
<p>该类型的值只有一个 undefined</p>
<p>使用typeof检查一个Undefined类型的值时，会返回<code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">undefined</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-类型转换"><a href="#2-4-类型转换" class="headerlink" title="2.4 类型转换"></a>2.4 类型转换</h3><h4 id="2-4-1-转换为string"><a href="#2-4-1-转换为string" class="headerlink" title="2.4.1 转换为string"></a>2.4.1 转换为string</h4><p>方式①：调用被转换数据的<code>toString()</code>方法（这个方法不适用于null和undefined）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">a = a.toString();</span><br></pre></td></tr></table></figure>
<p>方式②：调用<code>String()</code>函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">a = <span class="built_in">String</span>(a);</span><br></pre></td></tr></table></figure>
<p>原理：对于Number Boolean String都会调用他们的toString()方法来将其转换为字符串，对于null值，<strong>直接转换为字符串”null”</strong>。对于undefined直接转换为字符串”undefined”</p>
<p>方式③：隐式的类型转换：<code>任意的数据类型 +&quot;&quot;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">true</span>;</span><br><span class="line">a = a + <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-2-转换为number"><a href="#2-4-2-转换为number" class="headerlink" title="2.4.2 转换为number"></a>2.4.2 转换为number</h4><p>方式①：调用Number()函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">s = <span class="built_in">Number</span>(s);</span><br></pre></td></tr></table></figure>
<p>方式②：调用<code>parseInt()</code>或<code>parseFloat()</code>。这两个函数专门用来将一个字符串转换为数字的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">a = <span class="built_in">parseInt</span>(a);</span><br></pre></td></tr></table></figure>
<p>方式③：使用一元的+来进行隐式的类型转换</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;123&quot;</span>;  </span><br><span class="line">a = +a;  </span><br></pre></td></tr></table></figure>
<h3 id="2-5-运算符"><a href="#2-5-运算符" class="headerlink" title="2.5 运算符"></a>2.5 运算符</h3><h4 id="2-5-1-逻辑运算符"><a href="#2-5-1-逻辑运算符" class="headerlink" title="2.5.1 逻辑运算符"></a>2.5.1 逻辑运算符</h4><ul>
<li><p><code>!</code></p>
</li>
<li><p><code>&amp;&amp;</code></p>
</li>
<li><code>||</code></li>
</ul>
<h4 id="2-5-2-相等运算符"><a href="#2-5-2-相等运算符" class="headerlink" title="2.5.2 相等运算符"></a>2.5.2 相等运算符</h4><p>相等，判断左右两个值是否相等，如果相等返回true，如果不等返回false。</p>
<p>相等会自动对两个值进行类型转换，如果对不同的类型进行比较，会将其转换为相同的类型然后再比较，转换后相等它也会返回true，注意：<code>null == undifined</code></p>
<ul>
<li><code>!=</code><ul>
<li>不等，判断左右两个值是否不等，如果不等则返回true，如果相等则返回false。不等会做自动的类型转换。</li>
</ul>
</li>
<li><code>===</code><ul>
<li><strong>全等</strong>，判断左右两个值是否全等，它和相等类似，只不过它<strong>不会进行自动的类型转换</strong>，如果两个值的类型不同，则直接返回false</li>
</ul>
</li>
<li><code>!==</code><ul>
<li><strong>不全等</strong>，和不等类似，但是它不会进行自动的类型转换，如果两个值的类型不同，它会直接返回true</li>
</ul>
</li>
</ul>
<blockquote>
<p>一些例子</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>表达式</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>null == undefined</td>
<td>true</td>
</tr>
<tr>
<td>“NaN” == NaN</td>
<td>false</td>
</tr>
<tr>
<td>5 == NaN</td>
<td>false</td>
</tr>
<tr>
<td>NaN == NaN</td>
<td>true</td>
</tr>
<tr>
<td>false == 0</td>
<td>true</td>
</tr>
<tr>
<td>true == 1</td>
<td>true</td>
</tr>
<tr>
<td>true == 2</td>
<td>false</td>
</tr>
<tr>
<td>undefined == 0</td>
<td>false</td>
</tr>
<tr>
<td>null == 0</td>
<td>false</td>
</tr>
<tr>
<td>“5” ==  5</td>
<td>true</td>
</tr>
<tr>
<td>“5” ===  5</td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-对象"><a href="#3-对象" class="headerlink" title="3 对象"></a>3 对象</h2><p>对象是JS中的引用数据类型。<strong>对象是一种复合数据类型，在对象中可以保存多个不同数据类型的属性和方法</strong>。使用typeof检查一个对象时，会返回object。</p>
<p>对象除了可以创建自有属性，还可以通过从一个名为<strong>原型</strong>的对象那里继承属性。</p>
<ul>
<li>基本数据类型的数据，变量是直接保存的它的值。</li>
<li>引用数据类型的数据，变量是保存的对象的<strong>引用（内存地址）</strong>。</li>
</ul>
<p>对象分类：</p>
<ul>
<li>内建对象：由ES标准中定义的对象，在任何的ES的实现中都可以使用。比如：Math String Number Boolean Function Object….</li>
<li>宿主对象：由JS的运行环境提供的对象，目前来讲主要指由浏览器提供的对象，比如 BOM DOM</li>
<li>自定义对象：由开发人员自己创建的对象  </li>
</ul>
<h3 id="3-1-对象操作"><a href="#3-1-对象操作" class="headerlink" title="3.1 对象操作"></a>3.1 对象操作</h3><h4 id="3-1-1-创建对象和添加属性"><a href="#3-1-1-创建对象和添加属性" class="headerlink" title="3.1.1 创建对象和添加属性"></a>3.1.1 创建对象和添加属性</h4><p>方式①：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">person.name = <span class="string">&quot;Hongyi&quot;</span>;</span><br><span class="line">person.age = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p>方式②：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Hongyi&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-1-2-访问属性"><a href="#3-1-2-访问属性" class="headerlink" title="3.1.2 访问属性"></a>3.1.2 访问属性</h4><ul>
<li>对象.属性名</li>
<li>对象[“属性名”]</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(person.name);</span><br><span class="line"><span class="built_in">console</span>.log(person[<span class="string">&#x27;name&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>循环访问属性</p>
</blockquote>
<p>使用<code>for in</code>循环可以遍历对象的属性，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Hongyi&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&quot;male&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>遍历：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// n为属性名，name，age，gender</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> n <span class="keyword">in</span> obj) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(obj[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-函数"><a href="#3-2-函数" class="headerlink" title="3.2 函数"></a>3.2 函数</h3><p>函数是由一连串的子程序（语句的集合）所组成的，可以被外部程序调用。向函数传递参数之后，函数可以返回一定的值。</p>
<p>通常情况下，JavaScript 代码是自上而下执行的，不过函数体内部的代码则不是这样。如果只是对函数进行了声明，其中的代码并不会执行。只有在调用函数时才会执行函数体内部的代码。</p>
<p>使用typeof检查一个函数时会返回function。</p>
<p><strong>注意的是JavaScript中的函数也是一个对象。</strong>所以函数也有自己的属性。</p>
<h4 id="3-2-1-函数的声明和调用"><a href="#3-2-1-函数的声明和调用" class="headerlink" title="3.2.1 函数的声明和调用"></a>3.2.1 函数的声明和调用</h4><p>方式①：函数声明：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">[形参<span class="number">1</span>,形参<span class="number">2.</span>..形参N]</span>)</span>&#123;  </span><br><span class="line">	<span class="comment">// 语句...  </span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res = sum(<span class="number">1</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>方式②：函数表达式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 函数名 = <span class="function"><span class="keyword">function</span>(<span class="params">[形参<span class="number">1</span>,形参<span class="number">2.</span>..形参N]</span>)</span>&#123;  </span><br><span class="line">	<span class="comment">// 语句...  </span></span><br><span class="line">&#125;;  </span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上边的例子就是创建了一个<strong>函数对象</strong>，并将函数对象赋值给了sum这个变量。其中()中的内容表示执行函数时需要的参数，{}中的内容表示函数的主体。</p>
<p>调用同①。</p>
<h4 id="3-2-2-返回值和方法"><a href="#3-2-2-返回值和方法" class="headerlink" title="3.2.2 返回值和方法"></a>3.2.2 返回值和方法</h4><p>return后可以跟任意类型的值，可以是基本数据类型，也可以是一个对象。</p>
<p><strong>如果return后不跟值，或者是不写return则函数默认返回undefined。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// return undefined</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// return undefined</span></span><br></pre></td></tr></table></figure>
<p><strong>方法（method）</strong>：可以将一个函数设置为一个对象的属性，当一个对象的属性是一个函数时，我们称这个函数是该对象的<strong>方法</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj.name = <span class="string">&quot;Hongyi&quot;</span>;</span><br><span class="line"><span class="comment">// 函数作为对象的一个属性</span></span><br><span class="line"><span class="comment">// 称为该对象的方法</span></span><br><span class="line">obj.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用该方法</span></span><br><span class="line">obj.sayName();</span><br></pre></td></tr></table></figure>
<h4 id="3-2-3-作用域"><a href="#3-2-3-作用域" class="headerlink" title="3.2.3 作用域"></a>3.2.3 作用域</h4><p>作用域简单来说就是一个变量的作用范围。</p>
<p>在JS中作用域分成两种：</p>
<ul>
<li><p>全局作用域：</p>
<ul>
<li>直接在script标签中编写的代码都运行在全局作用域中</li>
<li><strong>全局作用域在打开页面时创建，在页面关闭时销毁。</strong></li>
<li>全局作用域中有一个<strong>全局对象window</strong>，window对象由浏览器提供，可以在页面中直接使用，它代表的是整个的浏览器的窗口。</li>
<li><p><strong>在全局作用域中创建的变量都会作为window对象的属性保存</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">	<span class="keyword">var</span> a = <span class="number">10</span>;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(a);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.a);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 两个语句本质相同</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在全局作用域中创建的函数都会作为window对象的方法保存</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">	alert(<span class="string">&quot;Hello World!&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.alert(<span class="string">&quot;Hello World!&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在全局作用域中创建的变量和函数可以在页面的任意位置访问。</p>
</li>
<li>在函数作用域中也可以访问到全局作用域的变量。</li>
<li>尽量不要在全局中创建变量</li>
</ul>
</li>
</ul>
<blockquote>
<p>变量的声明提前</p>
</blockquote>
<p>在全局作用域中，使用<strong>var关键字声明的变量会在所有的代码执行之前被声明，但是不会赋值。</strong>不使用var关键字声明的变量不会被声明提前。</p>
<p>例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> a = <span class="string">&quot;Hongyi&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面这个写法同下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> a; <span class="comment">// 声明</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="javascript">    a = <span class="string">&quot;Hongyi&quot;</span>; <span class="comment">// 赋值</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>又如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(a); <span class="comment">// 报错：Uncaught ReferenceError: a is not defined</span></span></span><br><span class="line"><span class="javascript">    a = <span class="string">&quot;Hongyi&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>函数的声明提前</p>
</blockquote>
<p>在全局作用域中，使用<strong>函数声明创建的函数（function fun(){}）,会在所有的代码执行之前被创建</strong>，但是使用函数表达式(var fun = function(){})创建的函数没有该特性。</p>
<p>例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">	fun();</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;; <span class="comment">// 正常执行</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>又如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">	fun();</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;; <span class="comment">// 报错</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>函数作用域：<ul>
<li>函数作用域是函数执行时创建的作用域，每次调用函数都会创建一个新的函数作用域。</li>
<li>函数作用域在函数执行时创建，在函数执行结束时销毁。</li>
<li>在函数作用域中创建的变量，不能在全局中访问。</li>
<li>当在函数作用域中使用一个变量时，它会先在自身作用域中寻找，如果找到了则直接使用，如果没有找到则到上一级作用域中寻找，如果找到了则使用，找不到则继续向上找，一直会找到全局作用域的变量为止。</li>
</ul>
</li>
</ul>
<h4 id="3-2-4-函数的属性和方法"><a href="#3-2-4-函数的属性和方法" class="headerlink" title="3.2.4 函数的属性和方法"></a>3.2.4 函数的属性和方法</h4><blockquote>
<p>属性</p>
</blockquote>
<p>在函数内部，有两个特殊的隐含参数： </p>
<ul>
<li><code>arguments</code>：<ul>
<li>该对象实际上是一个数组，用于保存函数的<strong>实参</strong>。注意，即使函数不定义形参，也可以使用arguments来保存实参。</li>
<li>同时该对象还有一个属性callee来表示当前函数。</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length); <span class="comment">// 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// &quot;hello&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">fun(<span class="string">&quot;hello&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length); <span class="comment">// 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// &quot;hello&quot;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee); <span class="comment">// 为函数本身</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee == fun); <span class="comment">// true</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">fun(<span class="string">&quot;hello&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>this</code>：<ul>
<li>this 引用的是一个对象。对于最外层代码与函数内部的情况，其引用目标是不同的。 </li>
<li>此外，即使在函数内部，根据函数调用方式的不同，引用对象也会有所不同。需要注意的是，this 引用会根据代码的上下文语境自动改变其引用对象。</li>
</ul>
</li>
</ul>
<blockquote>
<p>方法</p>
</blockquote>
<p>函数作为对象，内部也有方法，有<code>apply()</code>和<code>call()</code>。</p>
<p><strong>这两个方法都是函数对象的方法需要通过函数对象来调用</strong>。</p>
<p>当对函数调用这两个方法时，都会调用函数执行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下三种调用等价</span></span><br><span class="line">fun();</span><br><span class="line">fun.call();</span><br><span class="line">fun.apply();</span><br></pre></td></tr></table></figure>
<p>不同的是，这两个方法<strong>可以通过第一个实参来指定函数中this指向的对象</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">fun(); <span class="comment">// this --&gt; window</span></span><br><span class="line">fun.call(obj); <span class="comment">// this --&gt; obj</span></span><br><span class="line">fun.apply(obj); <span class="comment">// this --&gt; obj</span></span><br></pre></td></tr></table></figure>
<ul>
<li>call方法可以将实参在对象之后依次传递</li>
<li>apply方法需要将实参封装到一个数组中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(a + b);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">fun.call(obj, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">fun.apply(obj, [<span class="number">1</span>, <span class="number">2</span>]);</span><br></pre></td></tr></table></figure>
<h4 id="3-2-5-this上下文对象"><a href="#3-2-5-this上下文对象" class="headerlink" title="3.2.5 this上下文对象"></a>3.2.5 this上下文对象</h4><p>浏览器在调用函数时，每次都会向函数内部传递进一个隐含的参数，这个参数就是<code>this</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">fun();</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213195505882.png" alt="image-20220213195505882"></p>
<p>根据函数的<strong>调用方式</strong>不同会执向不同的对象</p>
<ul>
<li>以函数的形式调用时，this是window，例如上例</li>
<li>以方法的形式调用时，this是调用方法的对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 这里的this，为调用方法的对象obj</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// &quot;Hongyi&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Hongyi&quot;</span>,</span><br><span class="line">    <span class="attr">func</span>: fun</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.func();</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213202700437.png" alt="image-20220213202700437"></p>
<ul>
<li>以构造函数的形式调用时，this是新建的那个对象</li>
<li>使用call和apply调用时，this是指定的那个对象</li>
<li>在全局作用域中this代表window</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213203508337.png" alt="image-20220213203508337"></p>
<h4 id="3-2-6-构造函数"><a href="#3-2-6-构造函数" class="headerlink" title="3.2.6 构造函数"></a>3.2.6 构造函数</h4><p>构造函数是用于生成对象的函数，像之前调用的Object()就是一个构造函数。</p>
<p><strong>一个构造函数我们也可以称为一个类</strong>。</p>
<p>通过一个构造函数创建的对象，我们称该对象时这个构造函数的<strong>实例</strong>。</p>
<p>构造函数就是一个普通的函数，<strong>只是他的调用方式不同</strong>，如果直接调用，它就是一个普通函数；如果使用new来调用，则它就是一个构造函数。</p>
<p>在开发中，通常会区分用于执行的函数和构造函数。</p>
<p>创建一个构造函数和new调用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数首字母一般大写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name , age , gender</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 这里的this指向要创建的对象，这里为person</span></span><br><span class="line">    <span class="built_in">this</span>.name = name;  </span><br><span class="line">    <span class="built_in">this</span>.age = age;  </span><br><span class="line">    <span class="built_in">this</span>.gender = gender;  </span><br><span class="line">    <span class="comment">// 添加一个方法</span></span><br><span class="line">    <span class="built_in">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">        alert(<span class="built_in">this</span>.name);  </span><br><span class="line">    &#125;;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// new调用</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">&quot;Hongyi&quot;</span>, <span class="number">20</span>, <span class="string">&quot;male&quot;</span>);</span><br><span class="line"><span class="comment">// 普通调用</span></span><br><span class="line"><span class="keyword">var</span> person2 = Person(<span class="string">&quot;Hongyi&quot;</span>, <span class="number">20</span>, <span class="string">&quot;male&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>构造函数的执行流程：</p>
<ol>
<li>创建一个新的对象</li>
<li>将新的对象作为函数的上下文对象（this）</li>
<li>执行函数中的代码</li>
<li>将新建的对象返回</li>
</ol>
<blockquote>
<p>intanceof关键字</p>
</blockquote>
<p>作用：<strong>用来检查一个对象是否是一个类的实例</strong>。如果该对象时构造函数的实例，则返回true，否则返回false</p>
<p>注意：<strong>Object是所有对象的祖先，所以任何对象和Object做instanceof都会返回true</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(person <span class="keyword">instanceof</span> Person); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-7-prototype原型"><a href="#3-2-7-prototype原型" class="headerlink" title="3.2.7 prototype原型"></a>3.2.7 prototype原型</h4><p>JS是一门面向对象的语言，而且它还是一个基于原型的面向对象的语言。</p>
<p>创建一个函数以后，<strong>解析器都会默认在函数中添加一个属性prototype</strong>。prototype属性又指向的是一个对象，这个对象我们称为<strong>原型对象</strong>，当然，原型对象作为对象而言，自己也有许多的属性。</p>
<ul>
<li>当函数作为普通函数调用时，prototype没有任何作用和意义</li>
<li>当函数作为构造函数使用，<strong>它所创建的对象中都会有一个隐含的属性执行该原型对象。</strong>这个隐含的属性可以通过<code>对象.__proto__</code>来访问。  </li>
</ul>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> MyClass();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(mc.__proto__ == MyClass.prototype); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213205653962.png" alt="image-20220213205653962"></p>
<p>原型对象也是对象，所以也有<code>prototype</code>属性，所以完整的原型链图如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213211725661.png" alt="image-20220213211725661"></p>
<p>又如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(MyClass.prototype);</span><br><span class="line"><span class="built_in">console</span>.log(mc.__proto__);</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220213210012880.png" alt="image-20220213210012880"></p>
<p><strong>原型对象就相当于一个公共的区域，凡是通过同一个构造函数创建的对象他们通常都可以访问到相同的原型对象。</strong></p>
<p>我们可以将对象中共有的属性和方法统一添加到原型对象中，这样我们只需要添加一次，就可以使所有的对象都可以使用。当我们去访问对象的一个属性或调用对象的一个方法时，它会先自身中寻找，如果在自身中找到了，则直接使用。如果没有找到，则去原型对象中寻找，如果找到了则使用，如果没有找到，则去原型的原型中寻找，依此类推。直到找到Object的原型为止，<strong>Object的原型的原型为null</strong>，如果依然没有找到则返回undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 向原型中添加属性a</span></span><br><span class="line">MyClass.prototype.a = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// 向原型里添加方法</span></span><br><span class="line">MyClass.prototype.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="built_in">console</span>.log(mc.a); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 向mc中添加a</span></span><br><span class="line">mc.a = <span class="number">456</span>;</span><br><span class="line"><span class="built_in">console</span>.log(mv.a); <span class="comment">// 456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用原型里的方法</span></span><br><span class="line">mc.sayHello();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>hasOwnProperty()</p>
</blockquote>
<p>作用：这个方法可以用来检查<strong>对象自身中</strong>是否含有某个属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 向原型中添加属性a</span></span><br><span class="line">MyClass.prototype.a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="built_in">console</span>.log(mc.hasOwnProperty(<span class="string">&quot;a&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">mc.a = <span class="number">456</span>;</span><br><span class="line"><span class="built_in">console</span>.log(mc.hasOwnProperty(<span class="string">&quot;a&quot;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-垃圾回收"><a href="#3-3-垃圾回收" class="headerlink" title="3.3 垃圾回收"></a>3.3 垃圾回收</h3><p>不再使用的对象的内存将会自动回收，这种功能称作垃圾回收。</p>
<p>所谓不再使用的对象，指的是没有被任何一个属性（变量）引用的对象。 </p>
<p>垃圾回收的目的是，使开发者不必为对象的生命周期管理花费太多精力。</p>
<h3 id="3-4-引用数据类型"><a href="#3-4-引用数据类型" class="headerlink" title="3.4 引用数据类型"></a>3.4 引用数据类型</h3><p>上边我们说到JS中除了5种基本数据类型以外其余的全都是对象，也就是引用数据类型。但是虽然全都是对象，但是对象的种类却是非常繁多的。比如我们说过的Array（数组），Function（函数）这些都是不同的类型对象。实际上在JavaScript中还提供了多种不同类型的对象。</p>
<h4 id="3-4-1-Object"><a href="#3-4-1-Object" class="headerlink" title="3.4.1 Object"></a>3.4.1 Object</h4><p>目前为止，我们看到的最多的类型就是Object，它也是我们在JS中使用的最多的对象。</p>
<p>创建Object对象有两种方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是第一种我们使用了一个new关键字和一个Object()函数。上边的两种方式都可以返回一个Object对象。</p>
<p>这个函数就是专门用来创建一个Object对象并返回的，像这种函数我们称为构造函数。</p>
<h4 id="3-4-2-Array暂略"><a href="#3-4-2-Array暂略" class="headerlink" title="3.4.2 Array暂略"></a>3.4.2 Array暂略</h4><p>数组也是一个对象，是一个用来存储数据的对象和Object类似，但是它的存储效率比普通对象要。</p>
<p>Array用于表示一个有序的数组。JS的数组中可以保存任意类型的数据。</p>
<h5 id="1）-创建数组"><a href="#1）-创建数组" class="headerlink" title="1） 创建数组"></a>1） 创建数组</h5><p>创建一个数组的方式有两种：</p>
<ul>
<li>使用构造器：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>); <span class="comment">// 10为数组长度</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">123</span>, <span class="string">&quot;Hello&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr); <span class="comment">// object</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用<code>[]</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = []; <span class="comment">// 创建一个空数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">123</span>, <span class="string">&quot;Hello&quot;</span>, <span class="literal">false</span>];</span><br></pre></td></tr></table></figure>
<p>暂略</p>
<h4 id="3-4-3-Date暂略"><a href="#3-4-3-Date暂略" class="headerlink" title="3.4.3 Date暂略"></a>3.4.3 Date暂略</h4><p>暂略</p>
<h4 id="3-4-4-Function"><a href="#3-4-4-Function" class="headerlink" title="3.4.4 Function"></a>3.4.4 Function</h4><p>Function类型代表一个函数，每一个函数都是一个Function类型的对象。而且都与其他引用类型一样具有属性和方法。</p>
<p>由于函数是对象，因此函数名实际上也是一个指向函数对象的指针，不会与某个函数绑定。</p>
<h4 id="3-4-5-包装类"><a href="#3-4-5-包装类" class="headerlink" title="3.4.5 包装类"></a>3.4.5 包装类</h4><p>在JS中为我们提供了<strong>三个包装类：</strong><code>String()</code> <code>Boolean()</code> <code>Number()</code>。通过这三个包装类可以创建基本数据类型的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">2</span>);  </span><br><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;hello&quot;</span>);  </span><br><span class="line"><span class="keyword">var</span> bool = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>); </span><br></pre></td></tr></table></figure>
<p>实际开发中不用包装类</p>
<h2 id="4-DOM"><a href="#4-DOM" class="headerlink" title="4 DOM"></a>4 DOM</h2><h3 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h3><p>DOM，全称<code>Document Object Model</code>文档对象模型。</p>
<p>JS中通过DOM来对HTML文档进行操作。只要理解了DOM就可以随心所欲的操作WEB页面。</p>
<ul>
<li>文档：文档表示的就是整个的HTML网页文档</li>
<li>对象：对象表示将网页中的每一个部分都转换为了一个对象</li>
<li>模型：使用模型来表示对象之间的关系，这样方便我们获取对象</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220214104648109.png" alt="image-20220214104648109"></p>
<h3 id="4-2-节点"><a href="#4-2-节点" class="headerlink" title="4.2 节点"></a>4.2 节点</h3><p>节点Node，是构成我们网页的最基本的组成部分，是构成HTML文档最基本的单元。网页中的每一个部分都可以称为是一个节点。</p>
<p>常用节点分为四类：</p>
<ol>
<li><strong>文档节点</strong>：整个HTML文档</li>
<li><strong>元素节点</strong>：HTML文档中的众多HTML标签</li>
<li><strong>属性节点</strong>：元素节点的属性</li>
<li><strong>文本节点</strong>：HTML标签中的文本内容</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220214105003876.png" alt="image-20220214105003876"></p>
<ul>
<li>节点的属性：nodeName，nodeType，nodeValue</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>nodeName</th>
<th>nodeType</th>
<th>nodeValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>文档节点</td>
<td>#document</td>
<td>9</td>
<td>null</td>
</tr>
<tr>
<td>元素节点</td>
<td>标签名</td>
<td>1</td>
<td>null</td>
</tr>
<tr>
<td>属性节点</td>
<td>属性名</td>
<td>2</td>
<td>属性值</td>
</tr>
<tr>
<td>文本节点</td>
<td>#text</td>
<td>3</td>
<td>文本内容</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>文档节点document</p>
</blockquote>
<p>文档节点document，代表的是整个HTML文档，网页中的所有节点都是它的子节点。</p>
<p><strong>document对象作为window对象的属性存在的</strong>，我们不用获取可以直接使用。</p>
<p>通过该对象我们可以在整个文档访问内查找节点对象，并可以通过该对象创建各种节点对象。</p>
<blockquote>
<p>元素节点Element</p>
</blockquote>
<p>HTML中的各种标签都是元素节点，这也是我们最常用的一个节点。</p>
<p>浏览器会将页面中所有的标签都转换为一个元素节点，我们可以通过document的方法来获取元素节点。</p>
<p>例如：<code>document.getElementById()</code>：根据id属性值获取一个元素节点对象。</p>
<blockquote>
<p>文本节点Text</p>
</blockquote>
<p>文本节点表示的是HTML标签以外的文本内容，任意非HTML的文本都是文本节点。</p>
<p>文本节点一般是作为元素节点的子节点存在的。</p>
<blockquote>
<p>属性节点Attr</p>
</blockquote>
<p>属性节点表示的是标签中的一个一个的属性，这里要注意的是属性节点并非是元素节点的子节点，而是元素节点的一部分</p>
<p>可以通过元素节点来获取指定的属性节点</p>
<p>例如：<code>元素节点.getAttributeNode(&quot;属性名&quot;)</code></p>
<p>注意：一般不使用属性节点</p>
<blockquote>
<p>示例</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>我是一个按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取document对象</span></span></span><br><span class="line"><span class="javascript">    	<span class="built_in">console</span>.log(<span class="built_in">document</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取button对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(btn);</span></span><br><span class="line"><span class="javascript">        </span></span><br><span class="line"><span class="javascript">        <span class="comment">// 修改按钮的文字</span></span></span><br><span class="line"><span class="javascript">        btn.innerHTML = <span class="string">&quot;Hello World&quot;</span>;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-DOM加载"><a href="#4-3-DOM加载" class="headerlink" title="4.3 DOM加载"></a>4.3 DOM加载</h3><p>浏览器在加载一个页面时，是按照自上向下的顺序加载的，加载一行执行一行。如果将js代码编写到页面的上边（例如写在<code>&lt;head&gt;</code>中），当代码执行时，页面中的DOM对象还没有加载，此时将会无法正常获取到DOM对象，导致DOM操作失败。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">        btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&quot;hello&quot;</span>);</span></span><br><span class="line"><span class="javascript">        &#125;;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>点我一下<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220216172606020.png" alt="image-20220216172606020"></p>
<p>理由：按顺序加载至<code>&lt;body&gt;</code>中的script代码时，button尚未生成，因此<code>var btn = null</code>，绑定单击事件失败。</p>
<blockquote>
<p>解决</p>
</blockquote>
<p>方式①：可以将js代码编写到body的下边</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>点我一下<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">        btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&quot;hello&quot;</span>);</span></span><br><span class="line"><span class="javascript">        &#125;;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方式②：将js代码编写到<code>window.onload = function()&#123;&#125;</code>中，window.onload 对应的回调函数<strong>会在整个页面加载完毕以后才执行</strong>，所以可以确保代码执行时，DOM对象已经加载完毕了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="javascript">                btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;hello&quot;</span>);</span></span><br><span class="line"><span class="javascript">            &#125;;</span></span><br><span class="line"><span class="javascript">        &#125;;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>点我一下<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-DOM查询暂略"><a href="#4-4-DOM查询暂略" class="headerlink" title="4.4 DOM查询暂略"></a>4.4 DOM查询暂略</h3><p>略</p>
<h2 id="5-事件"><a href="#5-事件" class="headerlink" title="5 事件"></a>5 事件</h2><p>我们通过为指定事件<strong>绑定回调函数</strong>的形式来处理事件，当指定事件触发以后我们的回调函数就会被调用，这样我们的页面就可以完成和用户的交互了。</p>
<h3 id="5-1-事件处理程序"><a href="#5-1-事件处理程序" class="headerlink" title="5.1 事件处理程序"></a>5.1 事件处理程序</h3><p>我们可以通过两种方式为一个元素绑定事件处理程序：</p>
<ul>
<li>通过HTML元素指定事件属性来绑定</li>
<li>通过DOM对象指定的属性来绑定（推荐）</li>
</ul>
<p>这两种方式都是我们日常用的比较多的，但是更推荐使用第二种方式。</p>
<p>还有一种方式比较特殊我们称为<strong>设置事件监听器</strong>。使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">元素对象.addEventListener()</span><br></pre></td></tr></table></figure>
<h4 id="5-1-1-通过HTML标签的属性设置"><a href="#5-1-1-通过HTML标签的属性设置" class="headerlink" title="5.1.1 通过HTML标签的属性设置"></a>5.1.1 通过HTML标签的属性设置</h4><p>通过HTML属性来绑定事件处理程序是最简单的方式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;hello&#x27;);alert(&#x27;world&#x27;)&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这种方式当我们点击按钮以后，onclick属性中对应的JS代码将会执行，也就是点击按钮以后，页面中会弹出两个提示框。</p>
<p>这种方式我们直接将代码编写到了onclick属性中，可以编写多行js代码，当然也可以事先在外部定义好函数。</p>
<p>这种方式的优点在于，设定步骤非常简单，并且能够确保事件处理程序会在载入时被设定。 </p>
<h4 id="5-1-2-通过DOM对象的属性绑定"><a href="#5-1-2-通过DOM对象的属性绑定" class="headerlink" title="5.1.2 通过DOM对象的属性绑定"></a>5.1.2 通过DOM对象的属性绑定</h4><p>其实上面的写法虽然简单，但却将JS和HTML的代码编写到了一起，并不推荐使用，我们更推荐如下的写法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="comment">// 通过DOM对象的属性绑定</span></span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	alert(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这种写法将HTML代码和JS写在不同的位置，维护起来更加容易。</p>
<h4 id="5-1-3-设置事件监听器"><a href="#5-1-3-设置事件监听器" class="headerlink" title="5.1.3 设置事件监听器"></a>5.1.3 设置事件监听器</h4><p>前边两种方式都可以绑定事件处理程序，但是它们都有一个缺点就是都只能绑定一个程序，而不能为一个事件绑定多个程序。</p>
<p>这时我们就可以使用<code>addEventListener()</code>来处理，这个方法需要两个参数：一个是事件字符串，一个是<strong>响应函数</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">btn.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="5-1-事件对象"><a href="#5-1-事件对象" class="headerlink" title="5.1 事件对象"></a>5.1 事件对象</h3><p>当响应函数被调用时，浏览器每次都会将一个事件对象event作为实参传递进响应函数中，这个事件对象中封装了当前事件的相关信息，比如：鼠标的坐标，键盘的按键，鼠标的按键，滚轮的方向等等。</p>
<p>DOM标准的浏览器会将一个event对象传入到事件的处理程序当中。无论事件处理程序是什么都会传入一个event对象。</p>
<p>可以在响应函数中定义一个形参，来接收该事件对象，但是在IE8以下浏览器中事件对象没有做完实参传递，而是作为window对象的属性保存。可以通过这种方式获取：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">	alert(event.type);</span><br><span class="line">    <span class="comment">// alert(window.event);</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Event对象包含与创建它的特定事件有关的属性和方法。触发的事件类型不一样，可用的属性和方法也不一样。</p>
<blockquote>
<p>Event对象的通用属性/方法</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220216174721695.png" alt="image-20220216174721695"></p>
<p>以下略</p>
<h2 id="6-BOM"><a href="#6-BOM" class="headerlink" title="6 BOM"></a>6 BOM</h2><p>略</p>
<hr>
<p>以下为高级篇内容</p>
<h2 id="7-基础深入总结"><a href="#7-基础深入总结" class="headerlink" title="7 基础深入总结"></a>7 基础深入总结</h2><h3 id="7-1-数据类型"><a href="#7-1-数据类型" class="headerlink" title="7.1 数据类型"></a>7.1 数据类型</h3><h4 id="7-1-1-基本数据类型"><a href="#7-1-1-基本数据类型" class="headerlink" title="7.1.1 基本数据类型"></a>7.1.1 基本数据类型</h4><ol>
<li>String: 任意字符串</li>
<li>Number: 任意的数字</li>
<li>boolean: true/false</li>
<li>undefined: undefined</li>
<li>null: null —&gt;注意使用<code>typeof</code>时返回<code>object</code></li>
<li>symbol(ECMAScript2016新增)。 —&gt;Symbol 是基本数据类型的一种，<code>Symbol</code> 对象是 Symbol原始值的封装 (en-US) 。</li>
<li>bigint —&gt;<strong>BigInt</strong> 是一种数字类型的数据，它可以表示任意精度格式的整数。</li>
</ol>
<p>加上下方的 [ 对象 ] 类型，目前 javaScript 有<strong>八种数据类型</strong></p>
<h4 id="7-1-2-对象（引用）数据类型"><a href="#7-1-2-对象（引用）数据类型" class="headerlink" title="7.1.2 对象（引用）数据类型"></a>7.1.2 对象（引用）数据类型</h4><ol>
<li>Object: 任意对象</li>
<li>Function: 一种特别的<code>对象</code>(可以执行) —内部包含可运行的代码</li>
<li>Array: 一种特别的<code>对象</code>(<code>key</code>为数值下标属性，内部数据是有序的)</li>
</ol>
<p>注意：对于引用类型的变量，存储的不是数据本身，而是<strong>指向该数据的一个地址值</strong>。基本类型的变量保存的就是基本类型的数据。</p>
<blockquote>
<p>什么是实例</p>
</blockquote>
<p>由构造函数new出来的对象，即为该构造函数的实例对象，简称实例。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数 或称 类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 根据类型创建的实例对象，简称实例</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">&quot;Hongyi&quot;</span>, <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数也是函数，也能作为普通函数被调用</span></span><br><span class="line"><span class="comment">// 但不推荐这么写</span></span><br><span class="line">Person(<span class="string">&quot;Jack&quot;</span>, <span class="number">12</span>);</span><br></pre></td></tr></table></figure>
<h4 id="7-1-3-判断数据类型"><a href="#7-1-3-判断数据类型" class="headerlink" title="7.1.3 判断数据类型"></a>7.1.3 判断数据类型</h4><blockquote>
<p>方式①：<code>typeof</code></p>
</blockquote>
<p><code>typeof</code> 操作符返回一个<code>字符串</code>，表示未经计算的操作数的类型。</p>
<ul>
<li>可以判断: undefined/ 数值 / 字符串 / 布尔值 / function</li>
<li>不能判断: null与object object与array</li>
<li><code>注意</code>: 运行<code>console.log(typeof undefined)</code>时，得到的的也是一个<code>字符串,同时为首字母小写</code>—&gt; <code>&#39;undefined&#39;</code></li>
<li>代码示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// typeof返回数据类型的字符串表达</span></span><br><span class="line"><span class="keyword">var</span> a</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意:typeof返回的是字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(a, <span class="keyword">typeof</span> a, <span class="keyword">typeof</span> a === <span class="string">&#x27;undefined&#x27;</span>,a === <span class="literal">undefined</span> ) <span class="comment">// undefined &#x27;undefined&#x27; true true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> === <span class="string">&#x27;undefined&#x27;</span>) <span class="comment">//false</span></span><br><span class="line">a = <span class="number">4</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a === <span class="string">&#x27;number&#x27;</span>) <span class="comment">//true</span></span><br><span class="line">a = <span class="string">&#x27;hongjilin&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>) <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a === <span class="string">&#x27;String&#x27;</span>) <span class="comment">//false  --&gt;注意,返回的类型为小写</span></span><br><span class="line">a = <span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a === <span class="string">&#x27;boolean&#x27;</span>) <span class="comment">//true</span></span><br><span class="line">a = <span class="literal">null</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a, a === <span class="literal">null</span>) <span class="comment">// &#x27;object&#x27;  true</span></span><br><span class="line"><span class="keyword">let</span> b=&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b,<span class="keyword">typeof</span> <span class="literal">null</span>, <span class="string">&#x27;-------&#x27;</span>) <span class="comment">// &#x27;object&#x27; &#x27;object&#x27;  --&gt;所以Typeof不能判断null与object</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>方式②：<code>instanceof</code>判断实例方法</p>
</blockquote>
<ul>
<li><code>专门判断对象</code>的具体类型</li>
<li><code>instanceof</code> <strong>运算符</strong>用于检测构造函数的 <code>prototype</code> 属性是否出现在某个实例对象的原型链上</li>
<li>代码示例:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b1 = &#123;</span><br><span class="line">    <span class="attr">b2</span>: [<span class="number">1</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="built_in">console</span>.log],</span><br><span class="line">    <span class="comment">//可以简化成 b3:()=&gt;()=&gt; &#x27;hongjilin&#x27;  --&gt;高阶函数相关知识</span></span><br><span class="line">    <span class="attr">b3</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="function">() =&gt;</span>&#123;  <span class="keyword">return</span>   <span class="string">&#x27;hongjilin&#x27;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**使用instanceof进行对象判断*/</span></span><br><span class="line"><span class="built_in">console</span>.log(b1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>, b1 <span class="keyword">instanceof</span> <span class="built_in">Array</span>) <span class="comment">// true  false</span></span><br><span class="line"><span class="built_in">console</span>.log(b1.b2 <span class="keyword">instanceof</span> <span class="built_in">Array</span>, b1.b2 <span class="keyword">instanceof</span> <span class="built_in">Object</span>) <span class="comment">// true true</span></span><br><span class="line"><span class="built_in">console</span>.log(b1.b3 <span class="keyword">instanceof</span> <span class="built_in">Function</span>, b1.b3 <span class="keyword">instanceof</span> <span class="built_in">Object</span>) <span class="comment">// true true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**使用typeof进行对象中某属性的判断*/</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b1.b2, <span class="keyword">typeof</span> <span class="literal">null</span>) <span class="comment">// &#x27;object&#x27; &#x27;object&#x27;  </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b1.b3===<span class="string">&#x27;function&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b1.b2[<span class="number">2</span>]===<span class="string">&#x27;function&#x27;</span>) <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**调用对象与数组中某函数示例*/</span></span><br><span class="line">b1.b2[<span class="number">2</span>](<span class="string">&#x27;调用console.log打印hongjilin&#x27;</span>)    <span class="comment">//调用console.log打印hongjilin</span></span><br><span class="line"><span class="built_in">console</span>.log(b1.b3()()) <span class="comment">// hongjilin</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>方式③：<code>===</code></p>
</blockquote>
<p>可以判断: undefined, null</p>
<p>简而言之，在比较两件事情时，<code>双等号将执行类型转换</code>;<code>三等号将进行相同的比较，而不进行类型转换</code> (如果类型不同, 只是总会返回 false )</p>
<h4 id="7-1-4-典型问题"><a href="#7-1-4-典型问题" class="headerlink" title="7.1.4 典型问题"></a>7.1.4 典型问题</h4><p>①<code>undefined</code>和<code>null</code>区别</p>
<ul>
<li>undefined代表定义未赋值</li>
<li>nulll定义并赋值了，只是值为null</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// undefined</span></span><br><span class="line">a = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// null</span></span><br></pre></td></tr></table></figure>
<p>②什么时候给变量赋值为null呢?</p>
<ul>
<li>初始赋值，表明将要赋值为对象，<code>可以用做约定俗成的占位符</code></li>
<li>结束前，让对象成为垃圾对象(被垃圾回收器回收)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//起始,可以用做约定俗成的占位符</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">null</span>  <span class="comment">// 初始赋值为null, 表明将要赋值为对象</span></span><br><span class="line"><span class="comment">//确定对象就赋值</span></span><br><span class="line">b = [<span class="string">&#x27;atguigu&#x27;</span>, <span class="number">12</span>]</span><br><span class="line"><span class="comment">//最后在不使用的时候,将其引用置空,就可以释放b这个对象占用的内存---当没有引用指向它的对象称为垃圾对象</span></span><br><span class="line">b = <span class="literal">null</span> <span class="comment">// 让b指向的对象成为垃圾对象(被垃圾回收器回收)</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-函数"><a href="#7-2-函数" class="headerlink" title="7.2 函数"></a>7.2 函数</h3><h4 id="7-2-1-函数的概念"><a href="#7-2-1-函数的概念" class="headerlink" title="7.2.1 函数的概念"></a>7.2.1 函数的概念</h4><ul>
<li><p>什么是函数</p>
<ul>
<li>实现特定功能的n条语句的封装体</li>
<li>只有函数是可以执行的, 其它类型的数据不能执行</li>
</ul>
</li>
<li><p>如何定义函数</p>
<ul>
<li><p>函数声明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="7-2-2-如何调用函数"><a href="#7-2-2-如何调用函数" class="headerlink" title="7.2.2 如何调用函数"></a>7.2.2 如何调用函数</h4><p>例如有一个test函数，有四种方法来调用它：</p>
<ol>
<li><code>test()</code>: 直接调用</li>
<li><code>obj.test()</code>: 通过对象调用，如果obj对象有test函数这个属性</li>
<li><code>new test()</code>: new调用</li>
<li><code>test.call/apply(obj)</code>: 临时让test成为obj的方法进行调用</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;Mark&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// obj.test()  不能直接调用, obj根本就没有test()这个属性</span></span><br><span class="line">test.call(obj);  <span class="comment">// 可以让一个函数成为指定任意对象的方法进行调用</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.name); <span class="comment">// &quot;Mark&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="7-2-3-回调函数"><a href="#7-2-3-回调函数" class="headerlink" title="7.2.3 回调函数"></a>7.2.3 回调函数</h4><blockquote>
<p>什么函数才是回调函数</p>
</blockquote>
<ul>
<li>你定义的</li>
<li>你没有调</li>
<li>但最终它执行了(在某个时刻或某个条件下)</li>
</ul>
<blockquote>
<p>常见的回调函数</p>
</blockquote>
<ul>
<li>dom事件回调函数 ==&gt;发生事件的dom元素</li>
<li>定时器回调函数 ===&gt;window</li>
<li>ajax请求回调函数</li>
<li>生命周期回调函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dom事件回调函数</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.innerHTML);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定时器回调函数</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;到点了&#x27;</span>+<span class="built_in">this</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>
<h4 id="7-2-4-IIFE函数"><a href="#7-2-4-IIFE函数" class="headerlink" title="7.2.4 IIFE函数"></a>7.2.4 IIFE函数</h4><ol>
<li>全称: <code>Immediately-Invoked Function Expression</code> <strong>立即执行函数</strong>，或者称为<strong>匿名函数自调用</strong></li>
<li>作用:<ul>
<li>隐藏实现</li>
<li>不会污染外部(一般指全局)命名空间</li>
<li>用它来编码js模块，向外暴露接口</li>
</ul>
</li>
<li>代码示例</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匿名函数自调用</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a + <span class="number">3</span>);</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此处前方为何要一个`;`--&gt;因为自调用函数外部有一个()包裹,可能与前方以()结尾的代码被一起认为是函数调用</span></span><br><span class="line"><span class="comment">//不加分号可能会被认为这样 console.log(a)(IIFE)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 向外暴露接口示例</span></span><br><span class="line"><span class="comment">// 这里暴露了test函数</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(++a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 给window新增一个i属性，这个属性为一个函数</span></span><br><span class="line">    <span class="comment">// 该函数返回一个对象</span></span><br><span class="line">    <span class="comment">// 该对象有一个test属性，值为test函数</span></span><br><span class="line">    <span class="built_in">window</span>.i = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">test</span>: test</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">test(); <span class="comment">// undefined 直接调用不行</span></span><br><span class="line">i().test(); <span class="comment">// 2 间接调用</span></span><br></pre></td></tr></table></figure>
<h4 id="7-2-5-函数中的this"><a href="#7-2-5-函数中的this" class="headerlink" title="7.2.5 函数中的this"></a>7.2.5 函数中的this</h4><blockquote>
<p>this是什么</p>
</blockquote>
<ul>
<li>任何函数本质上都是通过某个对象来调用的，作为方法被这个对象调用，<strong>如果没有直接指定就是window</strong></li>
<li>所有函数内部都有一个变量this</li>
<li>它的值是<code>调用函数的当前对象</code></li>
</ul>
<blockquote>
<p>如何确定this的指向</p>
</blockquote>
<ul>
<li><code>test()</code>: window</li>
<li><code>p.test()</code>: p</li>
<li><code>new test()</code>: 新创建的对象</li>
<li><code>p.call(obj)</code>: obj</li>
</ul>
<blockquote>
<p>示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">this</span>.color = color;</span><br><span class="line">    <span class="built_in">this</span>.getColor = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.color;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.setColor = <span class="function"><span class="keyword">function</span> (<span class="params">color</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person(<span class="string">&quot;red&quot;</span>); <span class="comment">//this是谁? window</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Person(<span class="string">&quot;yello&quot;</span>); <span class="comment">//this是谁? p</span></span><br><span class="line"></span><br><span class="line">p.getColor(); <span class="comment">//this是谁? p</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="comment">//调用call会改变this指向--&gt;让我的p函数成为`obj`的临时方法进行调用</span></span><br><span class="line">p.setColor.call(obj, <span class="string">&quot;black&quot;</span>); <span class="comment">//this是谁? obj</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = p.setColor;</span><br><span class="line">test(); <span class="comment">//this是谁? window  --&gt;因为直接调用了</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"></span>) </span>&#123;  <span class="built_in">console</span>.log(<span class="built_in">this</span>); &#125;</span><br><span class="line">    fun2(); <span class="comment">//this是谁? window</span></span><br><span class="line">&#125;</span><br><span class="line">fun1();<span class="comment">//调用fun1</span></span><br></pre></td></tr></table></figure>
<h4 id="7-2-6-分号的使用"><a href="#7-2-6-分号的使用" class="headerlink" title="7.2.6 分号的使用"></a>7.2.6 分号的使用</h4><p>下面2种情况下不加分号会有问题，解决办法: 在行首加分号</p>
<ul>
<li><code>小括号开头的前一条语句</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">3</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)() <span class="comment">// 如果都不加分号，则报错</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修正1：</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">3</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修正2：</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">3</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<ul>
<li><code>中方括号开头的前一条语句</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b = <span class="number">4</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>].forEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;) <span class="comment">// 如果都不加分号，则报错</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修正方法1，2同上</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">4</span></span><br><span class="line">;[<span class="number">1</span>, <span class="number">3</span>].forEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="8-函数高级"><a href="#8-函数高级" class="headerlink" title="8 函数高级"></a>8 函数高级</h2><h3 id="8-1-原型与原型链"><a href="#8-1-原型与原型链" class="headerlink" title="8.1 原型与原型链"></a>8.1 原型与原型链</h3><h4 id="8-1-1-原型prototype"><a href="#8-1-1-原型prototype" class="headerlink" title="8.1.1 原型prototype"></a>8.1.1 原型prototype</h4><ul>
<li><p>函数的<code>prototype</code>属性</p>
<ul>
<li><p>每个函数都有一个prototype属性，它默认指向一个Object空对象(即称为: 原型对象)，所谓空对象是指这个对象没有我们自己定义的属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> func.prototype); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(func.prototype);</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220132127033.png" alt="image-20220220132127033"></p>
</li>
<li><p>原型对象中有一个属性constructor，它指向函数对象</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220132930460.png" alt="image-20220220132930460"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220132811222.png" alt="image-20220220132811222"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(func.prototype.constructor === func); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>给原型对象添加属性(<code>一般都是添加方法</code>)</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 向原型对象添加属性，例如添加一个方法</span></span><br><span class="line">func.prototype.test = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(func.prototype);</span><br></pre></td></tr></table></figure>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220132415613.png" alt="image-20220220132415613"></p>
<ul>
<li><p>作用：函数的<strong>所有实例对象</strong>自动拥有原型中的属性(方法)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 向原型对象添加属性</span></span><br><span class="line">Func.prototype.test = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建一个Func的实例对象fn</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="keyword">new</span> Func();</span><br><span class="line">fn.test(); <span class="comment">// &quot;Hello World&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.__proto__); </span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220133336573.png" alt="image-20220220133336573"></p>
</li>
</ul>
</li>
</ul>
<h4 id="8-1-2-显式原型与隐式原型"><a href="#8-1-2-显式原型与隐式原型" class="headerlink" title="8.1.2 显式原型与隐式原型"></a>8.1.2 显式原型与隐式原型</h4><ul>
<li>每个函数function都有一个<code>prototype</code>，即<code>显式</code>原型(属性)，默认指向空的object对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Func.prototype);</span><br></pre></td></tr></table></figure>
<ul>
<li>每个实例对象都有一个[<code>__proto__</code>]，可称为<code>隐式</code>原型(属性)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fn = <span class="keyword">new</span> Func();</span><br><span class="line"><span class="built_in">console</span>.log(fn.__proto__);</span><br></pre></td></tr></table></figure>
<ul>
<li>对象的隐式原型的值为其对应构造函数的显式原型的值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(Func.prototype === fn.__proto__); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<ul>
<li>显式原型与隐式原型的内存结构图</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220134616488.png" alt="image-20220220134616488"></p>
<blockquote>
<p>总结</p>
</blockquote>
<ul>
<li>函数的[<code>prototype</code>]属性: 在定义函数时自动添加的，默认值是一个空Object对象</li>
<li>对象的[<code>__ proto __</code>]属性: 创建对象时自动添加的，<code>默认值为构造函数的prototype属性值</code></li>
<li>程序员能直接操作显式原型，但不能直接操作隐式原型(ES6之前)</li>
</ul>
<h4 id="8-1-3-原型链"><a href="#8-1-3-原型链" class="headerlink" title="8.1.3 原型链"></a>8.1.3 原型链</h4><h5 id="1）-基本说明"><a href="#1）-基本说明" class="headerlink" title="1） 基本说明"></a>1） 基本说明</h5><p>js加载页面时，会将一个内置的构造函数<code>Object()</code>加载进来，这个构造函数也是一个对象（函数），并由变量Object引用；</p>
<p>构造函数存在<code>prototype</code>属性，该prototype指向Object的原型对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype);</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220143139930.png" alt="image-20220220143139930"></p>
<p>上面的即为Object原型对象的诸多属性。</p>
<h5 id="2）-原型链图示"><a href="#2）-原型链图示" class="headerlink" title="2） 原型链图示"></a>2） 原型链图示</h5><blockquote>
<p>原型链——代码及图示</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个函数对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.test1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;test1()...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Fn.prototype.test2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;test2()...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Fn的实例对象fn</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="keyword">new</span> Fn();</span><br><span class="line">fn.test1();</span><br><span class="line">fn.test2();</span><br><span class="line"><span class="built_in">console</span>.log(fn.toString());</span><br><span class="line">fn.test3();</span><br></pre></td></tr></table></figure>
<p>图示：</p>
<p>左侧为栈，保存变量，右侧为内存空间；例如左侧的Fn为变量（引用型），它保存的是Fn函数对象的地址值（或者说，变量Fn<strong>指向</strong>了这个函数对象）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220150510687.png" alt="image-20220220150510687"></p>
<p><strong>原型链的尽头是Object的原型对象。因为其属性<code>__proto__</code>指向了<code>null</code>。</strong></p>
<blockquote>
<p>原型链的属性访问</p>
</blockquote>
<p>访问一个对象的属性时：</p>
<ul>
<li>先在自身属性中查找，找到返回，例如<code>test1()</code></li>
<li>如果没有，再沿着[<code>__proto__</code>]这条链向上查找，找到返回，例如<code>test2()</code>和<code>toString()</code></li>
<li>如果最终没找到，返回undefined，例如<code>test3()</code></li>
</ul>
<h5 id="3）构造函数-原型-实例对象的关系-图解"><a href="#3）构造函数-原型-实例对象的关系-图解" class="headerlink" title="3）构造函数/原型/实例对象的关系(图解)"></a>3）构造函数/原型/实例对象的关系(图解)</h5><blockquote>
<p>示例1</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> o2 = &#123;&#125;;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220151643532.png" alt="image-20220220151643532"></p>
<blockquote>
<p>示例2</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 本质为</span></span><br><span class="line"><span class="keyword">let</span> Foo = <span class="keyword">new</span> <span class="built_in">Function</span>();</span><br><span class="line"><span class="comment">// 所以有结论：</span></span><br><span class="line"><span class="comment">// 所有函数的__proto__都是一样的</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(f1.__proto__ === f2.__proto__); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220220151733699.png" alt="image-20220220151733699"></p>
<p>从上图可以看出：</p>
<ul>
<li><strong>所有函数都有显式原型和隐式原型两个属性</strong>。</li>
<li><strong>只有Function构造函数的显式原型和隐式原型是同一个对象。</strong></li>
<li><strong>实例对象的隐式原型是对应构造函数的显式原型</strong></li>
</ul>
<p>所以有：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">Function</span> = <span class="keyword">new</span> <span class="built_in">Function</span>();</span><br></pre></td></tr></table></figure>
<h5 id="4）-属性问题"><a href="#4）-属性问题" class="headerlink" title="4） 属性问题"></a>4） 属性问题</h5><p>分为读取和设置两种情况：</p>
<ul>
<li>读取对象的属性值时: 会自动到原型链中查找</li>
<li>设置对象的属性值时: 不会查找原型链，如果当前对象中没有此属性，直接添加此属性并设置其值</li>
<li>方法一般定义在原型中，属性一般通过构造函数定义在对象本身上</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Fn.prototype.a = <span class="string">&quot;111&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> fn1 = <span class="keyword">new</span> Fn();</span><br><span class="line"><span class="built_in">console</span>.log(fn1);</span><br><span class="line"><span class="built_in">console</span>.log(fn1.a); <span class="comment">// 111</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn2 = <span class="keyword">new</span> Fn();</span><br><span class="line"><span class="comment">// 在fn2上没有a这个属性，在fn2上添加</span></span><br><span class="line">fn2.a = <span class="string">&quot;222&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(fn2);</span><br><span class="line"><span class="built_in">console</span>.log(fn2.a); <span class="comment">// 222</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn1.a); <span class="comment">// 111</span></span><br><span class="line"><span class="built_in">console</span>.log(fn1.__proto__ === fn2.__proto__); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>执行结果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221142822418.png" alt="image-20220221142822418"></p>
<h4 id="8-1-4-instanceof"><a href="#8-1-4-instanceof" class="headerlink" title="8.1.4 instanceof"></a>8.1.4 instanceof</h4><ul>
<li>表达式: <code>A instanceof B</code></li>
<li>判断方法：如果B函数的显式原型对象在A对象的原型链上，返回true，否则返回false</li>
</ul>
<blockquote>
<p>案例1</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="built_in">console</span>.log(f1 <span class="keyword">instanceof</span> Foo); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(f1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221143254600.png" alt="image-20220221143254600"></p>
<blockquote>
<p>案例2</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span>  Foo); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221143424115.png" alt="image-20220221143424115"></p>
<h4 id="8-1-5-面试题"><a href="#8-1-5-面试题" class="headerlink" title="8.1.5 面试题"></a>8.1.5 面试题</h4><blockquote>
<p>面试题1</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  测试题1</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">A.prototype.n = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> A();</span><br><span class="line">A.prototype = &#123;</span><br><span class="line">    <span class="attr">n</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">m</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> A();</span><br><span class="line"><span class="built_in">console</span>.log(b.n, b.m, c.n, c.m); <span class="comment">// 1 undefined 2 3</span></span><br></pre></td></tr></table></figure>
<p>第9行代码将A的原型对象指向一个新的对象。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221144033763.png" alt="image-20220221144033763"></p>
<blockquote>
<p>面试题2</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   测试题2</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;a()...&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;b()...&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> F();</span><br><span class="line">f.a(); <span class="comment">// &#x27;a()...&#x27;</span></span><br><span class="line">f.b(); <span class="comment">// f.b is not a function</span></span><br><span class="line">F.a(); <span class="comment">// &#x27;a()...&#x27;</span></span><br><span class="line">F.b(); <span class="comment">// &#x27;b()...&#x27;</span></span><br></pre></td></tr></table></figure>
<p>图解：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221145525563.png" alt="image-20220221145525563"></p>
<h3 id="8-2-执行上下文与执行上下文栈"><a href="#8-2-执行上下文与执行上下文栈" class="headerlink" title="8.2 执行上下文与执行上下文栈"></a>8.2 执行上下文与执行上下文栈</h3><h4 id="8-2-1-前言"><a href="#8-2-1-前言" class="headerlink" title="8.2.1 前言"></a>8.2.1 前言</h4><p>当代码在 JavaScript 中运行时，执行代码的环境非常重要，并将概括为以下几点：</p>
<ul>
<li><p><strong>全局代码</strong>——第一次执行代码的默认环境。</p>
</li>
<li><p><strong>函数代码</strong>——当执行流进入函数体时。</p>
</li>
<li><p><code>(…)</code>—— 我们当作 执行上下文 是当前代码执行的一个环境与范围。</p>
</li>
</ul>
<p>换句话说，当我们启动程序时，我们从全局执行上下文中开始。一些变量是在全局执行上下文中声明的。我们称之为全局变量。当程序调用一个函数时，会发生什么?</p>
<p>以下几个步骤：</p>
<ul>
<li>JavaScript 创建一个新的执行上下文，我们叫作<strong>本地执行上下文</strong>。</li>
<li>这个本地执行上下文将有它自己的一组变量，这些变量将是这个执行上下文的本地变量。</li>
<li>新的执行上下文被推到到<strong>执行堆栈</strong>中。可以将执行堆栈看作是一种保存程序在其执行中的位置的容器。</li>
</ul>
<p>函数什么时候结束?当它遇到一个 return 语句或一个结束括号<code>&#125;</code>。</p>
<p>当一个函数结束时，会发生以下情况:</p>
<ul>
<li>这个本地执行上下文从执行堆栈中弹出。</li>
<li>函数将返回值返回调用上下文。调用上下文是调用这个本地的执行上下文，它可以是全局执行上下文，也可以是另外一个本地的执行上下文。这取决于调用执行上下文来处理此时的返回值，返回的值可以是一个对象、一个数组、一个函数、一个布尔值等等，如果函数没有 return 语句，则返回 undefined。</li>
<li>这个本地执行上下文被销毁，销毁是很重要，这个本地执行上下文中声明的所有变量都将被删除，不在有变量，这个就是为什么 称为本地执行上下文中自有的变量。</li>
</ul>
<h4 id="8-2-2-变量提升与函数提升"><a href="#8-2-2-变量提升与函数提升" class="headerlink" title="8.2.2 变量提升与函数提升"></a>8.2.2 变量提升与函数提升</h4><ul>
<li><p>变量声明提升</p>
<ul>
<li><p>通过var定义(声明)的变量，在定义语句之前就可以访问到</p>
</li>
<li><p>值: <code>undefined</code></p>
</li>
</ul>
</li>
</ul>
<ul>
<li>函数声明提升<ul>
<li>通过function声明的函数，在之前就可以直接调用</li>
<li>值: <code>函数定义(对象)</code></li>
</ul>
</li>
<li>两者出现的原因：浏览器的预处理（或预编译）导致的，参见下一小节</li>
</ul>
<blockquote>
<p>示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">4</span>; <span class="comment">// 变量提升</span></span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<p>实际执行为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a;</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line">    a = <span class="number">4</span>; <span class="comment">// 变量提升</span></span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<p>所以输出为undefined</p>
<blockquote>
<p>示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line">fn2(); <span class="comment">// 函数声明提升 fn2()...</span></span><br><span class="line">fn3(); <span class="comment">// 报错 fn3 is not a function</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fn2()...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn3 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fn3()...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：fn3是通过表达式声明的，不存在函数声明提升，因此报错。</p>
<h4 id="8-2-3-执行上下文"><a href="#8-2-3-执行上下文" class="headerlink" title="8.2.3 执行上下文"></a>8.2.3 执行上下文</h4><ul>
<li><p>代码分类(位置)</p>
<ul>
<li><p>全局代码</p>
</li>
<li><p>函数(局部)代码</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>全局执行上下文</p>
</blockquote>
<ul>
<li>在执行全局代码<strong>前</strong>将<strong>window</strong>确定为全局执行上下文</li>
<li>对<strong>全局数据</strong>进行<strong>预处理</strong><ul>
<li>var定义的全局变量==&gt;undefined，添加为window的属性</li>
<li>function声明的全局函数==&gt;赋值(fun)，添加为window的方法</li>
<li>this==&gt;赋值(window)</li>
</ul>
</li>
<li>开始执行全局代码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局执行上下文</span></span><br><span class="line"><span class="built_in">console</span>.log(a1, <span class="built_in">window</span>.a1); <span class="comment">// 均为undefined</span></span><br><span class="line">a2(); <span class="comment">// 打印</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// window</span></span><br><span class="line"><span class="keyword">var</span> a1 = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a1); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>函数执行上下文</p>
</blockquote>
<ul>
<li>在调用函数，准备执行函数体<strong>之前</strong>（注意不是定义时），创建对应的函数执行上下文对象(虚拟的, 存在于栈中)</li>
<li>对<strong>局部数据</strong>进行<strong>预处理</strong><ul>
<li>对形参变量\==&gt;用实参进行赋值==&gt;添加为执行上下文的属性</li>
<li>对<code>arguments</code>==&gt;用实参列表进行赋值，添加为执行上下文的属性</li>
<li>对var定义的局部变量==&gt;赋值为undefined，添加为执行上下文的属性</li>
<li>对function声明的函数 ==&gt;赋值(fun)，添加为执行上下文的方法</li>
<li>对this==&gt;赋值(调用函数的对象)</li>
</ul>
</li>
<li>开始执行函数体代码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数执行上下文</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a1</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a1); <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">console</span>.log(a2); <span class="comment">// undefined</span></span><br><span class="line">    a3(); <span class="comment">// 执行a3()</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// window</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>); <span class="comment">// 伪数组：1, 2</span></span><br><span class="line">    <span class="keyword">var</span> a2 = <span class="number">3</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h4 id="8-2-4-执行上下文栈"><a href="#8-2-4-执行上下文栈" class="headerlink" title="8.2.4 执行上下文栈"></a>8.2.4 执行上下文栈</h4><ol>
<li>在全局代码执行前，JS引擎就会创建一个栈来存储管理所有的<strong>执行上下文对象</strong>，包括全局和函数执行上下文对象</li>
<li>在全局执行上下文(window)确定后，将其添加到栈中(压栈)—&gt;<code>所以栈底百分百是[window]</code></li>
<li>在函数执行上下文创建后（<strong>创建时机：函数即将被调用前</strong>），将其添加到栈中(压栈)</li>
<li>在当前函数执行完后，将栈顶的对象移除(出栈)</li>
<li>当所有的代码执行完后，栈中只剩下window</li>
<li><code>上下文栈数==函数调用数+1</code></li>
</ol>
<blockquote>
<p>代码示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.进入全局执行上下文</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">5</span>;</span><br><span class="line">    foo(x + b); <span class="comment">// 3.进入foo函数执行上下文       </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a + c + y);</span><br><span class="line">&#125;;</span><br><span class="line">bar(<span class="number">10</span>); <span class="comment">// 2.进入bar函数执行上下文</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221153337980.png" alt="image-20220221153337980"></p>
<blockquote>
<p>一般情况下的执行上下文栈</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220221153500499.png" alt="image-20220221153500499"></p>
<h4 id="8-2-5-测试题"><a href="#8-2-5-测试题" class="headerlink" title="8.2.5 测试题"></a>8.2.5 测试题</h4><p>函数提升优先级高于变量提升，<strong>且不会被变量声明覆盖</strong>，但是会被变量赋值覆盖</p>
<ul>
<li>测试题1</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	测试题1: </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a); <span class="comment">// function</span></span><br><span class="line"><span class="comment">//---------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">1</span>; <span class="comment">// 函数提升被变量赋值覆盖</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b); <span class="comment">// number</span></span><br></pre></td></tr></table></figure>
<ul>
<li>测试题2</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	测试题2:</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">if</span> (!(b <span class="keyword">in</span> <span class="built_in">window</span>)) &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<ul>
<li>测试题3</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	测试题3:</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(c);</span><br><span class="line">&#125;</span><br><span class="line">c(<span class="number">2</span>); <span class="comment">// 报错  c is not a function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------------------------</span></span><br><span class="line"><span class="comment">// 实际执行顺序</span></span><br><span class="line"><span class="comment">// 先函数提升</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 后变量提升，但不会覆盖函数提升</span></span><br><span class="line"><span class="keyword">var</span> c;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> c); <span class="comment">// function</span></span><br><span class="line"><span class="comment">// 变量赋值，并覆盖函数提升</span></span><br><span class="line">c = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> c); <span class="comment">// number</span></span><br><span class="line">c(<span class="number">2</span>); <span class="comment">// 报错  c is not a function</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-作用域与作用域链"><a href="#8-3-作用域与作用域链" class="headerlink" title="8.3 作用域与作用域链"></a>8.3 作用域与作用域链</h3><h4 id="8-3-1-作用域"><a href="#8-3-1-作用域" class="headerlink" title="8.3.1 作用域"></a>8.3.1 作用域</h4><ul>
<li><p>理解</p>
<ul>
<li><p>就是一块”地盘”，一个代码段所在的区域</p>
</li>
<li><p>它是静态的(相对于上下文对象)，<strong>在编写代码时就确定了</strong></p>
</li>
<li>结论：<strong>定义了n个函数，则有n+1个作用域</strong></li>
</ul>
</li>
<li><p>分类</p>
<ul>
<li><p>全局作用域</p>
</li>
<li><p>函数作用域</p>
</li>
<li><p>没有<strong>块作用域</strong>（ES6有）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> c = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// c is not defined</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>作用</p>
<ul>
<li>隔离变量，不同作用域下同名变量不会有冲突</li>
</ul>
</li>
</ul>
<blockquote>
<p>代码示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以下共有3个作用域</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>, b = <span class="number">20</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">100</span>, c = <span class="number">300</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;fn()&#x27;</span>, a, b, c, x) <span class="comment">//100 20 300 10</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">1000</span>, d = <span class="number">400</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;bar()&#x27;</span>, a, b, c, d, x);</span><br><span class="line">    &#125;</span><br><span class="line">    bar(<span class="number">100</span>); <span class="comment">//1000 20 300 400 100</span></span><br><span class="line">    bar(<span class="number">200</span>); <span class="comment">//1000 20 300 400 200</span></span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<h4 id="8-3-2-作用域与执行上下文的区别与联系"><a href="#8-3-2-作用域与执行上下文的区别与联系" class="headerlink" title="8.3.2 作用域与执行上下文的区别与联系"></a>8.3.2 作用域与执行上下文的区别与联系</h4><ul>
<li><p>区别1:</p>
<ul>
<li><p>全局作用域之外，每个函数都会创建自己的作用域，<code>作用域在函数定义时就已经确定了。而不是在函数调用时。</code></p>
</li>
<li><p>全局执行上下文环境是在全局作用域确定之后，js代码马上执行之前创建</p>
</li>
<li><p>函数执行上下文是在调用函数时，函数体代码执行之前创建</p>
</li>
</ul>
</li>
<li><p>区别2:</p>
<ul>
<li><p>作用域是静态的，只要函数定义好了就一直存在，且不会再变化</p>
</li>
<li><p>执行上下文是动态的，调用函数时创建，函数调用结束时就会自动释放</p>
</li>
</ul>
</li>
<li><p>联系:</p>
<ul>
<li><p>执行上下文(对象)是从属于所在的作用域</p>
</li>
<li><p>全局上下文环境==&gt;全局作用域</p>
</li>
<li><p>函数上下文环境==&gt;对应的函数使用域</p>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220222103637692.png" alt="image-20220222103637692"></p>
<h4 id="8-3-3-作用域链"><a href="#8-3-3-作用域链" class="headerlink" title="8.3.3 作用域链"></a>8.3.3 作用域链</h4><ul>
<li><p>理解</p>
<ul>
<li><p>多个上下级关系的作用域形成的链, 它的方向是从下向上的(从内到外)</p>
</li>
<li><p><strong>查找变量时就是沿着作用域链来查找的</strong></p>
</li>
</ul>
</li>
<li><p>查找一个变量的查找规则</p>
<ul>
<li><p>在当前作用域下的执行上下文中查找对应的属性，如果有直接返回，否则进入2</p>
</li>
<li><p>在上一级作用域的执行上下文中查找对应的属性，如果有直接返回，否则进入3</p>
</li>
<li><p>再次执行2的相同操作，<strong>直到全局作用域</strong>，如果还找不到就抛出找不到的异常</p>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220222104217691.png" alt="image-20220222104217691"></p>
<h4 id="8-3-4-测试题"><a href="#8-3-4-测试题" class="headerlink" title="8.3.4 测试题"></a>8.3.4 测试题</h4><ul>
<li>测试题1</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">20</span>;</span><br><span class="line">    f();</span><br><span class="line">&#125;</span><br><span class="line">show(fn); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<p>图示：共3个作用域，注意两个函数作用域并不嵌套</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220222104844162.png" alt="image-20220222104844162"></p>
<ul>
<li>测试题2</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fn);</span><br><span class="line">&#125;</span><br><span class="line">fn(); <span class="comment">// 输出函数本身</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">fn2</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(fn2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fn2(); <span class="comment">// 报错 fn2 is not defined</span></span><br></pre></td></tr></table></figure>
<h3 id="8-4-闭包"><a href="#8-4-闭包" class="headerlink" title="8.4 闭包"></a>8.4 闭包</h3><p>一个函数和对其周围状态（<strong>lexical environment，词法环境</strong>）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是<strong>闭包</strong>（<strong>closure</strong>）。也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域。在 JavaScript 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。</p>
<h4 id="8-4-1-闭包概念的引出"><a href="#8-4-1-闭包概念的引出" class="headerlink" title="8.4.1 闭包概念的引出"></a>8.4.1 闭包概念的引出</h4><p>需求：循环遍历加监听，点击某个按钮, 提示”点击的是第n个按钮”</p>
<blockquote>
<p>错误场景</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>测试1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>测试2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>测试3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> btns = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 遍历加监听</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> btn = btns[i];</span></span><br><span class="line"><span class="javascript">            btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">&quot;第&quot;</span> + (i+<span class="number">1</span>) + <span class="string">&quot;个按钮&quot;</span>);</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220222110855384.png" alt="image-20220222110855384"></p>
<p>执行结果始终为4</p>
<blockquote>
<p>解决</p>
</blockquote>
<ul>
<li>方法1：保存下标，回调时再使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btns = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>);</span><br><span class="line"><span class="comment">// 遍历加监听</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> btn = btns[i];</span><br><span class="line">    <span class="comment">// 将btn所对应的下标保存在btn上</span></span><br><span class="line">    btn.index = i;</span><br><span class="line">    btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">&quot;第&quot;</span> + (<span class="built_in">this</span>.index+<span class="number">1</span>) + <span class="string">&quot;个按钮&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方法2：利用IIFE，闭包</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btns = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>);</span><br><span class="line"><span class="comment">// 遍历加监听</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; btns.length; i++) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> btn = btns[i];</span><br><span class="line">        btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&quot;第&quot;</span> + (i+<span class="number">1</span>) + <span class="string">&quot;个按钮&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="8-4-2-理解闭包"><a href="#8-4-2-理解闭包" class="headerlink" title="8.4.2 理解闭包"></a>8.4.2 理解闭包</h4><ul>
<li>如何产生闭包?<ul>
<li>当一个嵌套的内部(子)函数引用了嵌套的外部(父)函数的变量(或函数)时，就产生了闭包</li>
</ul>
</li>
<li>闭包到底是什么?<ul>
<li>理解一：闭包是嵌套的内部函数(绝大部分人)</li>
<li>理解二：包含被引用变量(函数)的对象(极少数人)。<strong>闭包是一个对象</strong>，属性就是被引用的变量</li>
<li>注意：闭包存在于嵌套的内部函数中</li>
</ul>
</li>
<li>产生闭包的条件?<ul>
<li>函数嵌套</li>
<li>内部函数引用了外部函数的数据(变量/函数)，且外部函数执行</li>
</ul>
</li>
<li>闭包产生的个数？<ul>
<li>外部函数调用几次，就产生多少个闭包</li>
</ul>
</li>
</ul>
<blockquote>
<p>示例</p>
</blockquote>
<p>通过Chrome调试查看闭包：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">// 函数声明时，就会产生闭包</span></span><br><span class="line">    <span class="comment">// 如果是表达式的话，则不行，因为没有函数声明提升</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">    fn2();</span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220222113555758.png" alt="image-20220222113555758"></p>
<p>点击“进入下一个断点”：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img10/image-20220222113637153.png" alt="image-20220222113637153"></p>
<h4 id="8-4-3-常见的闭包"><a href="#8-4-3-常见的闭包" class="headerlink" title="8.4.3 常见的闭包"></a>8.4.3 常见的闭包</h4><ul>
<li>将函数作为另一个函数的返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 将函数作为另一个函数的返回值</span></span><br><span class="line">    <span class="keyword">return</span> fn2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn1(); <span class="comment">// f = fn2</span></span><br><span class="line">f(); <span class="comment">// 3</span></span><br><span class="line">f(); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<p>注意，fn1只被调用了一次<code>var f = fn1();</code>，因此只产生了一个闭包。</p>
<blockquote>
<p>调试过程</p>
</blockquote>
<p>在<code>var a = 2;</code>和<code>a++;</code>打上断点调试：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220223111832638.png" alt="image-20220223111832638"></p>
<p>当fn1函数返回时，该闭包对象引用的a已经赋值为2：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220223112018898.png" alt="image-20220223112018898"></p>
<p>第一次调用f时（f就是fn2），闭包仍然为刚才的闭包。a自增后打印输出3：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220223112138950.png" alt="image-20220223112138950"></p>
<p>第二次调用f时，闭包不变：a自增后打印输出为4</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220223112241293.png" alt="image-20220223112241293"></p>
<ul>
<li>将函数作为实参传递给另一个函数调用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showDelay</span>(<span class="params">msg, time</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(msg);</span><br><span class="line">    &#125;, time);</span><br><span class="line">&#125;</span><br><span class="line">showDelay(<span class="string">&quot;Hello World&quot;</span>, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>这里的外部函数是<code>showDelay</code>，内部函数是回调函数，且内部函数引用了外部函数变量<code>msg</code>（注意不是<code>time</code>），因此产生了闭包。</p>
<h4 id="8-4-4-闭包的作用"><a href="#8-4-4-闭包的作用" class="headerlink" title="8.4.4 闭包的作用"></a>8.4.4 闭包的作用</h4><ol>
<li>使用函数内部的变量在函数执行完后，仍然存活在内存中(延长了<strong>局部变量</strong>的生命周期)</li>
<li>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</li>
</ol>
<p>典型问题：</p>
<ol>
<li>函数执行完后，函数内部声明的局部变量是否还存在?<ul>
<li>一般是不存在，存在于闭包中的变量才可能存在</li>
</ul>
</li>
<li>在函数外部能直接访问函数内部的局部变量吗?<ul>
<li>不能，但我们可以通过闭包让外部操作它</li>
</ul>
</li>
</ol>
<h4 id="8-4-5-闭包的生命周期"><a href="#8-4-5-闭包的生命周期" class="headerlink" title="8.4.5 闭包的生命周期"></a>8.4.5 闭包的生命周期</h4><ol>
<li>产生：在嵌套内部函数定义时就产生了（不是在内部函数调用时，而是在外部函数调用时）</li>
<li>死亡：在嵌套的内部函数成为垃圾对象时</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//此时闭包就已经产生了(函数提升,实际上[fn2]提升到了第一行, 内部函数对象已经创建了)</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn1(); <span class="comment">// f = fn2</span></span><br><span class="line">f(); <span class="comment">// 3</span></span><br><span class="line">f(); <span class="comment">// 4</span></span><br><span class="line">f = <span class="literal">null</span>; <span class="comment">// 闭包死亡(包含闭包的函数对象成为垃圾对象)</span></span><br></pre></td></tr></table></figure>
<h4 id="8-4-6-闭包的应用"><a href="#8-4-6-闭包的应用" class="headerlink" title="8.4.6 闭包的应用"></a>8.4.6 闭包的应用</h4><p>闭包的应用 : 定义JS模块</p>
<ul>
<li>具有特定功能的js文件</li>
<li>将所有的数据和功能都封装在一个函数内部(私有的)</li>
<li>只向外暴露一个包含n个方法的对象或函数</li>
<li>模块的使用者，只需要通过模块暴露的对象调用方法来实现对应的功能</li>
</ul>
<blockquote>
<p>代码示例</p>
</blockquote>
<ul>
<li>新建js模块<code>myModule.js</code>和<code>myModule2.js</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myModule</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 私有属性</span></span><br><span class="line">    <span class="keyword">var</span> msg = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">    <span class="comment">// 操作数据的函数，利用了闭包</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;doSomething &quot;</span> + msg.toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doOtherthing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;doOtherthing &quot;</span> + msg.toLowerCase());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 向外暴露对象，给外部使用的方法</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">doSomething</span>: doSomething,</span><br><span class="line">        <span class="attr">doOtherthing</span>: doOtherthing</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">window</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 私有属性</span></span><br><span class="line">    <span class="keyword">var</span> msg = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">    <span class="comment">// 操作数据的函数，利用了闭包</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;doSomething &quot;</span> + msg.toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doOtherthing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;doOtherthing &quot;</span> + msg.toLowerCase());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 向外暴露对象，给外部使用的方法</span></span><br><span class="line">    <span class="built_in">window</span>.myModule2 = &#123;</span><br><span class="line">        <span class="attr">doSomething</span>: doSomething,</span><br><span class="line">        <span class="attr">doOtherthing</span>: doOtherthing</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br><span class="line"><span class="comment">// 注：IIFE的两个window参数可不用写，但写上有利于代码压缩</span></span><br></pre></td></tr></table></figure>
<ul>
<li>新建页面</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入外部js模块--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./myModule.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./myModule2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> <span class="built_in">module</span> = myModule();</span></span><br><span class="line"><span class="javascript">        <span class="built_in">module</span>.doSomething();</span></span><br><span class="line"><span class="javascript">        <span class="built_in">module</span>.doOtherthing();</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        myModule2.doSomething();</span></span><br><span class="line"><span class="javascript">        myModule2.doOtherthing();</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220223134012352.png" alt="image-20220223134012352"></p>
<h4 id="8-4-7-闭包的缺点及解决"><a href="#8-4-7-闭包的缺点及解决" class="headerlink" title="8.4.7 闭包的缺点及解决"></a>8.4.7 闭包的缺点及解决</h4><ul>
<li><p>缺点：</p>
<ul>
<li><p>函数执行完后，函数内的局部变量没有释放，占用内存时间会变长</p>
</li>
<li><p>容易造成内存泄露</p>
</li>
</ul>
</li>
<li><p>解决：</p>
<ul>
<li><p><strong>能不用闭包就不用</strong></p>
</li>
<li><p>及时释放</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>[<span class="number">100000</span>];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(arr.length);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn1();</span><br><span class="line">f();</span><br><span class="line">f = <span class="literal">null</span>; <span class="comment">//让内部函数成为垃圾对象--&gt;回收闭包</span></span><br></pre></td></tr></table></figure>
<h4 id="8-4-8-内存溢出与内存泄漏"><a href="#8-4-8-内存溢出与内存泄漏" class="headerlink" title="8.4.8 内存溢出与内存泄漏"></a>8.4.8 内存溢出与内存泄漏</h4><ul>
<li><p>内存溢出</p>
<ul>
<li><p>一种程序运行出现的错误</p>
</li>
<li><p>当程序运行需要的内存超过了剩余的内存时，就出抛出内存溢出的错误</p>
</li>
</ul>
</li>
<li><p>内存泄露</p>
<ul>
<li><p>占用的内存没有及时释放</p>
</li>
<li><p><code>内存泄露积累多了就容易导致内存溢出</code></p>
</li>
<li><p>常见的内存泄露：</p>
<ul>
<li>意外的全局变量</li>
<li>没有及时清理的计时器或回调函数</li>
<li>闭包</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 内存溢出</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">    obj[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10000000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;-----&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 内存泄露</span></span><br><span class="line"><span class="comment">// 意外的全局变量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10000000</span>); <span class="comment">//不使用var let const去承接</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有及时清理的计时器或回调函数</span></span><br><span class="line"><span class="keyword">var</span> intervalId = <span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//启动循环定时器后不清理</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;----&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// clearInterval(intervalId)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(++a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn1();</span><br><span class="line">f();</span><br><span class="line"><span class="comment">// f = null</span></span><br></pre></td></tr></table></figure>
<p>不使用let const var等去声明,实际上是挂载到[<code>window</code>]上的,所以导致内存泄露</p>
<h4 id="8-4-9-测试题"><a href="#8-4-9-测试题" class="headerlink" title="8.4.9 测试题"></a>8.4.9 测试题</h4><ul>
<li>测试题1</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码片段一</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;The Window&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&quot;My Object&quot;</span>,</span><br><span class="line">    <span class="attr">getNameFunc</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(object.getNameFunc()());  <span class="comment">// The Window</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//代码片段二</span></span><br><span class="line"><span class="keyword">var</span> name2 = <span class="string">&quot;The Window&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> object2 = &#123;</span><br><span class="line">    <span class="attr">name2</span> : <span class="string">&quot;My Object&quot;</span>,</span><br><span class="line">    <span class="attr">getNameFunc</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 产生闭包 使用了外部函数的that</span></span><br><span class="line">            <span class="keyword">return</span> that.name2;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(object2.getNameFunc()()); <span class="comment">// My Object</span></span><br></pre></td></tr></table></figure>
<ul>
<li>测试题2</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">n,o</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(o)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">fun</span>:<span class="function"><span class="keyword">function</span>(<span class="params">m</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> fun(m,n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = fun(<span class="number">0</span>);  </span><br><span class="line">a.fun(<span class="number">1</span>);  </span><br><span class="line">a.fun(<span class="number">2</span>);  </span><br><span class="line">a.fun(<span class="number">3</span>);<span class="comment">//undefined,?,?,?</span></span><br><span class="line"><span class="keyword">var</span> b = fun(<span class="number">0</span>).fun(<span class="number">1</span>).fun(<span class="number">2</span>).fun(<span class="number">3</span>);<span class="comment">//undefined,?,?,?</span></span><br><span class="line"><span class="keyword">var</span> c = fun(<span class="number">0</span>).fun(<span class="number">1</span>);  </span><br><span class="line">c.fun(<span class="number">2</span>);  </span><br><span class="line">c.fun(<span class="number">3</span>);<span class="comment">//undefined,?,?,?</span></span><br></pre></td></tr></table></figure>
<h2 id="9-面向对象高级"><a href="#9-面向对象高级" class="headerlink" title="9 面向对象高级"></a>9 面向对象高级</h2><h3 id="9-1-对象创建模式"><a href="#9-1-对象创建模式" class="headerlink" title="9.1 对象创建模式"></a>9.1 对象创建模式</h3><h4 id="9-1-1-Object构造函数模式"><a href="#9-1-1-Object构造函数模式" class="headerlink" title="9.1.1 Object构造函数模式"></a>9.1.1 Object构造函数模式</h4><ul>
<li>套路: 先创建空Object对象，再动态添加属性/方法</li>
<li>适用场景: 起始时不确定对象内部数据</li>
<li>问题: 语句太多</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先创建空Object对象</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">p = &#123;</span><br><span class="line">    </span><br><span class="line">&#125; <span class="comment">//此时内部数据是不确定的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 再动态添加属性/方法</span></span><br><span class="line">p.name = <span class="string">&#x27;Tom&#x27;</span></span><br><span class="line">p.age = <span class="number">12</span></span><br><span class="line">p.setName = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name, p.age)</span><br><span class="line">p.setName(<span class="string">&#x27;Bob&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p.name, p.age)</span><br></pre></td></tr></table></figure>
<h4 id="9-1-2-对象字面量模式"><a href="#9-1-2-对象字面量模式" class="headerlink" title="9.1.2 对象字面量模式"></a>9.1.2 对象字面量模式</h4><ul>
<li>套路: 使用<code>&#123;&#125;</code>创建对象， 同时指定属性/方法</li>
<li>适用场景: 起始时对象内部数据是确定的</li>
<li>问题: 如果创建多个对象，有重复代码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">12</span>,</span><br><span class="line">    <span class="attr">setName</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p.name, p.age);</span><br><span class="line">p.setName(<span class="string">&quot;Hongyi&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p.name);</span><br></pre></td></tr></table></figure>
<h4 id="9-1-3-工厂模式"><a href="#9-1-3-工厂模式" class="headerlink" title="9.1.3 工厂模式"></a>9.1.3 工厂模式</h4><ul>
<li>套路: 通过工厂函数动态创建对象并返回</li>
<li>适用场景: 需要创建多个对象</li>
<li>问题: <code>对象没有一个具体的类型</code>，都是Object类型</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 工厂函数，返回obj</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;</span><br><span class="line">        <span class="attr">name</span>: name,</span><br><span class="line">        <span class="attr">age</span>: age,</span><br><span class="line">        <span class="attr">setName</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建两个人</span></span><br><span class="line"><span class="keyword">var</span> p1 = createPerson(<span class="string">&quot;Hongyi&quot;</span>, <span class="number">23</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = createPerson(<span class="string">&quot;Mark&quot;</span>, <span class="number">24</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1, p2);</span><br></pre></td></tr></table></figure>
<h4 id="9-1-4-自定义构造函数模式"><a href="#9-1-4-自定义构造函数模式" class="headerlink" title="9.1.4 自定义构造函数模式"></a>9.1.4 自定义构造函数模式</h4><ul>
<li>套路: 自定义构造函数，通过<code>new</code>创建对象</li>
<li>适用场景: 需要创建多个<code>类型确定</code>的对象，与上方工厂模式有所对比</li>
<li>问题: 每个对象都有相同的数据（例如相同的方法），浪费内存</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义类型（或称构造函数）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;Tom&quot;</span>, <span class="number">12</span>);</span><br><span class="line">p1.setName(<span class="string">&quot;Mark&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p1 <span class="keyword">instanceof</span> Person); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不同的类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span> (<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.price = price</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="string">&#x27;Bob&#x27;</span>, <span class="number">13000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s <span class="keyword">instanceof</span> Student)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&#x27;JACK&#x27;</span>, <span class="number">23</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1, p2)</span><br></pre></td></tr></table></figure>
<h4 id="9-1-5-构造函数-原型的组合模式"><a href="#9-1-5-构造函数-原型的组合模式" class="headerlink" title="9.1.5 构造函数+原型的组合模式"></a>9.1.5 构造函数+原型的组合模式</h4><ul>
<li>套路: 自定义构造函数，属性在函数中初始化，<strong>方法添加到原型上</strong></li>
<li>适用场景: 需要<code>创建多个类型确定</code>的对象，推荐使用</li>
<li>放在原型上可以节省空间(只需要加载一遍方法)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.setName = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;Tom&quot;</span>, <span class="number">12</span>);</span><br><span class="line">p1.setName(<span class="string">&quot;Mark&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(p1 <span class="keyword">instanceof</span> Person); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-继承模式"><a href="#9-2-继承模式" class="headerlink" title="9.2 继承模式"></a>9.2 继承模式</h3><h4 id="9-2-1-原型链继承"><a href="#9-2-1-原型链继承" class="headerlink" title="9.2.1 原型链继承"></a>9.2.1 原型链继承</h4><ul>
<li><p>套路</p>
<ul>
<li><p>定义父类型构造函数</p>
</li>
<li><p>给父类型的原型添加方法</p>
</li>
<li><p>定义子类型的构造函数</p>
</li>
<li><p><strong>关键：</strong>创建父类型的对象赋值给子类型的原型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Son.prototype = <span class="keyword">new</span> Father();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>关键</strong>：将子类型原型的构造属性设置为子类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Son.prototype.constructor = Son;</span><br></pre></td></tr></table></figure>
</li>
<li><p>给子类型原型添加方法</p>
</li>
<li><p>创建子类型的对象：可以调用父类型的方法</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>代码示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Supper</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.supProp = <span class="string">&quot;Supper property&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Supper.prototype.showSupperProp = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.supProp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sub</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.subProp =  <span class="string">&quot;Sub property&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关键：子类型的原型为父类型的一个实例对象</span></span><br><span class="line">Sub.prototype = <span class="keyword">new</span> Supper();</span><br><span class="line"><span class="comment">// 关键：将子类型原型的构造属性设置为子类型</span></span><br><span class="line">Sub.prototype.constructor = Sub;</span><br><span class="line"></span><br><span class="line">Sub.prototype.showSubProp = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.subProp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> Sub();</span><br><span class="line">sub.showSubProp();</span><br><span class="line">sub.showSupperProp();</span><br></pre></td></tr></table></figure>
<p>图示：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220225110647049.png" alt="image-20220225110647049"></p>
<p>注：构造函数的显式原型对象的constructor属性应该回指向构造函数本身。</p>
<h4 id="9-2-2-借用构造函数继承"><a href="#9-2-2-借用构造函数继承" class="headerlink" title="9.2.2 借用构造函数继承"></a>9.2.2 借用构造函数继承</h4><ul>
<li><p>套路:</p>
<ul>
<li><p>定义父类型构造函数</p>
</li>
<li><p>定义子类型构造函数</p>
</li>
<li><p>在子类型构造函数中调用父类型构造</p>
</li>
</ul>
</li>
<li><p>关键:</p>
<ul>
<li><code>在子类型构造函数中通用call()调用父类型构造函数</code></li>
</ul>
</li>
<li><p>作用:</p>
<ul>
<li>能借用父类中的构造方法，但是不灵活</li>
</ul>
</li>
</ul>
<blockquote>
<p>代码示例</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//此处利用call(),将 [Student]的this传递给Person构造函数</span></span><br><span class="line">    Person.call(<span class="built_in">this</span>, name, age); <span class="comment">// 相当于: this.Person(name, age)</span></span><br><span class="line">    <span class="comment">/*this.name = name</span></span><br><span class="line"><span class="comment"> 	this.age = age*/</span></span><br><span class="line">    <span class="built_in">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>, <span class="number">14000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s.name, s.age, s.price);</span><br></pre></td></tr></table></figure>
<h4 id="9-2-3-组合继承"><a href="#9-2-3-组合继承" class="headerlink" title="9.2.3 组合继承"></a>9.2.3 组合继承</h4><ol>
<li>利用原型链实现对父类型对象的方法继承</li>
<li>利用super()借用父类型构建函数初始化相同属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.setName = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="built_in">this</span>, name, age); <span class="comment">// 为了得到属性</span></span><br><span class="line">    <span class="built_in">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person(); <span class="comment">// 为了能看到父类型的方法</span></span><br><span class="line">Student.prototype.constructor = Student;</span><br><span class="line"></span><br><span class="line">Student.prototype.setPrice = <span class="function"><span class="keyword">function</span>(<span class="params">price</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">24</span>, <span class="number">15000</span>);</span><br><span class="line">s.setName(<span class="string">&#x27;Bob&#x27;</span>);</span><br><span class="line">s.setPrice(<span class="number">16000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s.name, s.age, s.price);</span><br></pre></td></tr></table></figure>
<h2 id="10-线程机制和事件机制"><a href="#10-线程机制和事件机制" class="headerlink" title="10 线程机制和事件机制"></a>10 线程机制和事件机制</h2><h3 id="10-1-进程和线程"><a href="#10-1-进程和线程" class="headerlink" title="10.1 进程和线程"></a>10.1 进程和线程</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220225125343543.png" alt="image-20220225125343543"></p>
<ul>
<li><p>JS是单线程还是多线程?</p>
<ul>
<li>js是单线程运行的。但使用H5中的 Web Workers可以多线程运行</li>
</ul>
</li>
<li><p>浏览器运行是单线程还是多线程?</p>
<ul>
<li>有的是单进程：firefox、老版本的IE</li>
<li>有的是多进程：chrome、新版本的IE</li>
</ul>
</li>
</ul>
<h3 id="10-2-浏览器内核"><a href="#10-2-浏览器内核" class="headerlink" title="10.2 浏览器内核"></a>10.2 浏览器内核</h3><p>支撑浏览器运行的最核心的程序。</p>
<h4 id="10-2-1-不同浏览器的内核"><a href="#10-2-1-不同浏览器的内核" class="headerlink" title="10.2.1 不同浏览器的内核"></a>10.2.1 不同浏览器的内核</h4><ul>
<li>Chrome，Safari : webkit</li>
<li>firefox : Gecko</li>
<li>IE : Trident</li>
<li>360，搜狗等国内浏览器: Trident + webkit</li>
</ul>
<h4 id="10-2-2-内核的模块"><a href="#10-2-2-内核的模块" class="headerlink" title="10.2.2 内核的模块"></a>10.2.2 内核的模块</h4><ul>
<li><p>主线程</p>
<ul>
<li><strong>js引擎模块</strong> : 负责js程序的编译与运行</li>
<li>html，css文档解析模块 : 负责页面文本的解析(拆解)</li>
<li>dom/css模块 : 负责dom/css在内存中的相关处理</li>
<li>布局和渲染模块 : 负责页面的布局和效果的绘制(内存中的对象)</li>
</ul>
</li>
<li><p>分线程</p>
<ul>
<li>定时器模块 : 负责定时器的管理</li>
<li>网络请求模块 : 负责服务器请求(常规/Ajax)</li>
<li>事件响应模块 : 负责事件的管理</li>
</ul>
</li>
</ul>
<h3 id="10-3-定时器"><a href="#10-3-定时器" class="headerlink" title="10.3 定时器"></a>10.3 定时器</h3><ul>
<li>定时器真是定时执行的吗?<ul>
<li>定时器并不能保证真正定时执行</li>
<li>一般会延迟一丁点(可以接受)，也有可能延迟很长时间(不能接受)</li>
</ul>
</li>
<li><p>定时器<strong>回调函数</strong>是在分线程执行的吗?</p>
<ul>
<li>在主线程执行的，因为js是单线程的</li>
</ul>
</li>
<li><p>定时器是如何实现的?</p>
<ul>
<li>事件循环模型（或称为事件轮询）</li>
<li><strong>事件轮询机制，使得js在单线程执行的前提下，能够实现执行异步任务的功能</strong>，或者说，js的异步功能是依靠事件轮询实现的</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>启动定时器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> start = <span class="built_in">Date</span>.now();</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;启动定时器前...&quot;</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&quot;定时器执行了...用时: &quot;</span>, <span class="built_in">Date</span>.now() - start);</span></span><br><span class="line"><span class="javascript">            &#125;, <span class="number">200</span>);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">&quot;启动定时器后...&quot;</span>);</span></span><br><span class="line"><span class="javascript">        &#125;;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 模拟做一个长时间的工作</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000000</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">        </span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="10-4-JS是单线程的"><a href="#10-4-JS是单线程的" class="headerlink" title="10.4 JS是单线程的"></a>10.4 JS是单线程的</h3><h4 id="10-4-1-如何证明JS是单线程执行"><a href="#10-4-1-如何证明JS是单线程执行" class="headerlink" title="10.4.1 如何证明JS是单线程执行"></a>10.4.1 如何证明JS是单线程执行</h4><ul>
<li><code>setTimeout()的回调函数是在主线程执行的</code></li>
<li>定时器回调函数只有在运行栈中的代码全部执行完后才有可能执行</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout 2222&quot;</span>);</span><br><span class="line">    alert(<span class="string">&quot;timeout 2222&quot;</span>);</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout 1111&quot;</span>);</span><br><span class="line">    alert(<span class="string">&quot;timeout 1111&quot;</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fn...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;alert之前...&quot;</span>);</span><br><span class="line"><span class="comment">// 暂停当前主线程的执行，同时暂停计时，点击确定后恢复程序执行和计时</span></span><br><span class="line">alert(<span class="string">&quot;--------&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;alert之后...&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>程序运行顺序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;fn...&quot;);</span><br><span class="line">console.log(&quot;alert之前...&quot;);</span><br><span class="line">alert(&quot;--------&quot;);</span><br><span class="line">console.log(&quot;alert之后...&quot;);</span><br><span class="line">console.log(&quot;timeout 1111&quot;);</span><br><span class="line">alert(&quot;timeout 1111&quot;);</span><br><span class="line">console.log(&quot;timeout 2222&quot;);</span><br><span class="line">alert(&quot;timeout 2222&quot;);</span><br></pre></td></tr></table></figure>
<h4 id="10-4-2-代码分类和JS引擎执行代码的基本流程"><a href="#10-4-2-代码分类和JS引擎执行代码的基本流程" class="headerlink" title="10.4.2 代码分类和JS引擎执行代码的基本流程"></a>10.4.2 代码分类和JS引擎执行代码的基本流程</h4><ul>
<li><p>代码分类</p>
<ul>
<li>初始化代码：是同步执行的</li>
<li>回调代码：例如定时器里的回调函数，是异步执行的</li>
</ul>
</li>
<li><p>JS引擎执行代码的基本流程</p>
<ul>
<li>先执行初始化代码: 包含一些特别的代码<ul>
<li>设置定时器（但不会立即执行里面的回调函数）</li>
<li>绑定事件监听（但只有事件触发的时候才会执行回调函数）</li>
<li>发送ajax请求</li>
</ul>
</li>
<li>后面在某个时刻才会执行回调代码</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout 2222&quot;</span>);</span><br><span class="line">    alert(<span class="string">&quot;timeout 2222&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout 1111&quot;</span>);</span><br><span class="line">    alert(<span class="string">&quot;timeout 1111&quot;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout 0000&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fn...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;alert之前...&quot;</span>);</span><br><span class="line">alert(<span class="string">&quot;--------&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;alert之后...&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>程序运行顺序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;fn...&quot;);</span><br><span class="line">console.log(&quot;alert之前...&quot;);</span><br><span class="line">alert(&quot;--------&quot;);</span><br><span class="line">console.log(&quot;alert之后...&quot;);</span><br><span class="line">console.log(&quot;timeout 0000&quot;);</span><br><span class="line">console.log(&quot;timeout 1111&quot;);</span><br><span class="line">alert(&quot;timeout 1111&quot;);</span><br><span class="line">console.log(&quot;timeout 2222&quot;);</span><br><span class="line">alert(&quot;timeout 2222&quot;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>为什么js要用单线程模式，而不用多线程模式?</p>
</blockquote>
<ol>
<li>JavaScript的单线程，与它的用途有关。</li>
<li>作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。</li>
<li>这决定了它只能是单线程，否则会带来很复杂的同步问题<ul>
<li>举个栗子：如果我们要实现更新页面上一个dom节点然后删除，用单线程是没问题的</li>
<li>但是如果多线程，当我删除线程先删除了dom节点，更新线程要去更新的时候就会出错</li>
</ul>
</li>
</ol>
<h3 id="10-5-事件循环模型Event-Loop"><a href="#10-5-事件循环模型Event-Loop" class="headerlink" title="10.5 事件循环模型Event Loop"></a>10.5 事件循环模型Event Loop</h3><h4 id="10-5-1-概述"><a href="#10-5-1-概述" class="headerlink" title="10.5.1 概述"></a>10.5.1 概述</h4><p>我们都知道，<code>javascript从诞生之日起就是一门单线程的非阻塞的脚本语言</code>。这是由其最初的用途来决定的：<code>与浏览器交互</code>。</p>
<ul>
<li>单线程：单线程意味着，javascript代码在执行的任何时候，都<strong>只有一个主线程</strong>来处理所有的任务。<ul>
<li>实现：JS引擎自身决定</li>
</ul>
</li>
<li>非阻塞：非阻塞则是当代码需要进行一项异步任务（无法立刻返回结果，需要花一定时间才能返回的任务，如I/O事件）的时候，主线程会挂起（pending）这个任务，然后在异步任务返回结果的时候再根据一定规则去执行相应的回调。<ul>
<li>实现：event loop（事件循环）</li>
</ul>
</li>
</ul>
<h4 id="10-5-2-相关概念"><a href="#10-5-2-相关概念" class="headerlink" title="10.5.2 相关概念"></a>10.5.2 相关概念</h4><blockquote>
<p>事件循环模型原理图</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://kisugitakumi.oss-cn-chengdu.aliyuncs.com/img11/image-20220226165740895.png" alt="image-20220226165740895"></p>
<blockquote>
<p>相关概念</p>
</blockquote>
<ul>
<li><p>执行栈<code>execution stack</code></p>
<ul>
<li>栈：当javascript代码执行的时候会将不同的变量存于内存中的不同位置：<code>堆（heap）</code>和<code>栈（stack）</code>中来加以区分。其中，堆里存放着一些对象。而栈中则存放着一些基础类型变量以及对象的指针。 <code>但是我们这里说的执行栈和上面这个栈的意义却有些不同</code>。</li>
<li>执行栈：当我们调用一个方法的时候，js会生成一个与这个方法对应的执行环境（context），又叫<code>执行上下文</code>。这个执行环境中存在着这个方法的私有作用域、上层作用域的指向、方法的参数，这个作用域中定义的变量以及这个作用域的this对象。 而当一系列方法被依次调用的时候，因为js是单线程的，同一时间只能执行一个方法，于是这些方法被排队在一个单独的地方。这个地方被称为执行栈。如图左上角的<code>stack</code></li>
</ul>
</li>
<li><p>回调队列<code>callback queue</code></p>
<ul>
<li>广义上称为回调队列，细分为任务队列<code>task queue</code>，消息队列<code>message queue</code>和事件队列<code>event queue</code>。</li>
<li>事件队列：JS引擎遇到一个异步事件后并不会一直等待其返回结果，而是会将这个事件挂起，继续执行执行栈中的其他任务，当一个异步事件返回结果后，js会将这个事件加入与当前执行栈不同的另一个队列，我们称之为<strong>事件队列</strong>。<ul>
<li>被放入事件队列不会立刻执行其回调，而是等待当前执行栈中的所有任务都执行完毕，主线程处于闲置状态时，主线程会去查找事件队列是否有任务。如果有，那么主线程会从中取出排在第一位的事件，并把这个事件对应的回调放入执行栈中，然后执行其中的同步代码…，如此反复，这样就形成了一个无限的循环。这就是这个过程被称为“事件循环（Event Loop）”的原因。</li>
<li>以上的事件循环过程是一个宏观的表述，实际上因为异步任务之间并不相同，因此他们的执行优先级也有区别。不同的异步任务被分为两类：微任务（micro task）和宏任务（macro task）</li>
</ul>
</li>
</ul>
</li>
<li><p>宏任务与微任务</p>
<ul>
<li>JS中用来存储待执行回调函数的队列包含2个不同特定的队列<ul>
<li><code>宏队列</code>:用来保存待执行的宏任务(回调)，比如:<code>定时器</code>回调/ajax回调/dom事件回调</li>
<li><code>微队列</code>:用来保存待执行的微任务(回调)，比如:<code>Promise</code>的回调/muntation回调</li>
</ul>
</li>
<li>JS执行时会区别这2个队列<ul>
<li>JS执行引擎首先必须执行所有的<code>初始化同步任务</code>代码</li>
<li>每次准备取出第一个宏任务执行前，都要将所有的微任务一个一个取出来执行，即微任务的优先级高于宏任务</li>
</ul>
</li>
</ul>
</li>
<li><p>Web APIs</p>
<ul>
<li>浏览器内核提供的管理模块，属于<strong>浏览器的分线程，不是JS的主线程</strong>。换句话说，这里执行的代码已经和JS没有任何的关系了。</li>
<li><p>例如定时器代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Hello World&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>JS将此段代码执行后（<code>setTimeout</code>），会将事件回调函数交给对应模块管理，之后继续向下执行打印代码（<code>Hello World</code>），而浏览器会<strong>新开启一个异步的定时器线程</strong>用于计时，“放入”Web APIs中。</p>
<p>计时时间到达之后，定时器线程会将该回调函数放入回调队列中，等待主线程空闲时被调用。即，回调函数还是是被JS主线程执行的。</p>
</li>
</ul>
</li>
</ul>
<h4 id="10-5-3-执行流程"><a href="#10-5-3-执行流程" class="headerlink" title="10.5.3 执行流程"></a>10.5.3 执行流程</h4><ul>
<li>执行初始化代码，将事件回调函数交给对应模块管理</li>
<li>当事件发生时，管理模块会将回调函数及其数据添加到回调列队中</li>
<li>只有当初始化代码执行完后(可能要一定时间)，才会遍历读取回调队列中的回调函数执行</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fn1()...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">fn1();</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;点击了btn&quot;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;定时器执行了&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fn2()...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">fn2();</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://kisugitakumi.com">Kisugi Takumi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://kisugitakumi.com">https://kisugitakumi.com</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">此文章版权归Kisugi Takumi所有,如有转载,请註明来自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/">前端学习</a><a class="post-meta__tags" href="/tags/JavaScript/">JavaScript</a></div><div class="post_share"><div class="social-share" data-image="/img/javascript.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/02/16/ES6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="/img/ecmascript.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">ECMAScript学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/2022/02/02/Ajax%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="next-cover" src="/img/ajax.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Ajax学习笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/03/30/React%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="React学习笔记"><img class="cover" src="/img/react.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-30</div><div class="title">React学习笔记</div></div></a></div><div><a href="/2022/03/06/Postman%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Postman学习笔记"><img class="cover" src="/img/postman.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-06</div><div class="title">Postman学习笔记</div></div></a></div><div><a href="/2022/02/28/axios%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="axios学习笔记"><img class="cover" src="/img/axios.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-28</div><div class="title">axios学习笔记</div></div></a></div><div><a href="/2022/08/17/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="微信小程序学习笔记"><img class="cover" src="/img/weixinxiaochengxu.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-17</div><div class="title">微信小程序学习笔记</div></div></a></div><div><a href="/2022/03/22/Webpack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Webpack学习笔记"><img class="cover" src="/img/webpack.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-22</div><div class="title">Webpack学习笔记</div></div></a></div><div><a href="/2022/07/14/css%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="css学习笔记"><img class="cover" src="/img/css.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-14</div><div class="title">css学习笔记</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-text">JavaScript学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86"><span class="toc-text">0 补充知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-1-DOM%E5%92%8CBOM"><span class="toc-text">0.1 DOM和BOM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0-1-1-JS%E7%BB%84%E6%88%90"><span class="toc-text">0.1.1 JS组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0-1-2-DOM-DOCUMENT-BOM-WINDOW%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">0.1.2 DOM DOCUMENT BOM WINDOW的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-JS%E7%AE%80%E4%BB%8B"><span class="toc-text">1 JS简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%A0%87%E5%87%86%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.1 标准实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%B8%89%E5%A4%A7%E7%BB%84%E6%88%90"><span class="toc-text">1.2 三大组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E7%89%B9%E7%82%B9"><span class="toc-text">1.3 特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">2 基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%BC%96%E5%86%99%E4%BD%8D%E7%BD%AE"><span class="toc-text">2.1 编写位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%8F%98%E9%87%8F"><span class="toc-text">2.2 变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.3 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-String"><span class="toc-text">2.3.1 String</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-Number"><span class="toc-text">2.3.2 Number</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-Boolean"><span class="toc-text">2.3.3 Boolean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-Null"><span class="toc-text">2.3.4 Null</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-5-Undefined"><span class="toc-text">2.3.5 Undefined</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">2.4 类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E8%BD%AC%E6%8D%A2%E4%B8%BAstring"><span class="toc-text">2.4.1 转换为string</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E8%BD%AC%E6%8D%A2%E4%B8%BAnumber"><span class="toc-text">2.4.2 转换为number</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">2.5 运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">2.5.1 逻辑运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-%E7%9B%B8%E7%AD%89%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">2.5.2 相等运算符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AF%B9%E8%B1%A1"><span class="toc-text">3 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C"><span class="toc-text">3.1 对象操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7"><span class="toc-text">3.1.1 创建对象和添加属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E8%AE%BF%E9%97%AE%E5%B1%9E%E6%80%A7"><span class="toc-text">3.1.2 访问属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%87%BD%E6%95%B0"><span class="toc-text">3.2 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E5%87%BD%E6%95%B0%E7%9A%84%E5%A3%B0%E6%98%8E%E5%92%8C%E8%B0%83%E7%94%A8"><span class="toc-text">3.2.1 函数的声明和调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E8%BF%94%E5%9B%9E%E5%80%BC%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-text">3.2.2 返回值和方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">3.2.3 作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-4-%E5%87%BD%E6%95%B0%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-text">3.2.4 函数的属性和方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-5-this%E4%B8%8A%E4%B8%8B%E6%96%87%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.2.5 this上下文对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-6-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-text">3.2.6 构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-7-prototype%E5%8E%9F%E5%9E%8B"><span class="toc-text">3.2.7 prototype原型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6"><span class="toc-text">3.3 垃圾回收</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.4 引用数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-Object"><span class="toc-text">3.4.1 Object</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-Array%E6%9A%82%E7%95%A5"><span class="toc-text">3.4.2 Array暂略</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89-%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-text">1） 创建数组</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3-Date%E6%9A%82%E7%95%A5"><span class="toc-text">3.4.3 Date暂略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-4-Function"><span class="toc-text">3.4.4 Function</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-5-%E5%8C%85%E8%A3%85%E7%B1%BB"><span class="toc-text">3.4.5 包装类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-DOM"><span class="toc-text">4 DOM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%A6%82%E8%BF%B0"><span class="toc-text">4.1 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E8%8A%82%E7%82%B9"><span class="toc-text">4.2 节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-DOM%E5%8A%A0%E8%BD%BD"><span class="toc-text">4.3 DOM加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-DOM%E6%9F%A5%E8%AF%A2%E6%9A%82%E7%95%A5"><span class="toc-text">4.4 DOM查询暂略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BA%8B%E4%BB%B6"><span class="toc-text">5 事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F"><span class="toc-text">5.1 事件处理程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E9%80%9A%E8%BF%87HTML%E6%A0%87%E7%AD%BE%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="toc-text">5.1.1 通过HTML标签的属性设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E9%80%9A%E8%BF%87DOM%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-text">5.1.2 通过DOM对象的属性绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3-%E8%AE%BE%E7%BD%AE%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-text">5.1.3 设置事件监听器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">5.1 事件对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-BOM"><span class="toc-text">6 BOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%9F%BA%E7%A1%80%E6%B7%B1%E5%85%A5%E6%80%BB%E7%BB%93"><span class="toc-text">7 基础深入总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.1 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.1.1 基本数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-%E5%AF%B9%E8%B1%A1%EF%BC%88%E5%BC%95%E7%94%A8%EF%BC%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.1.2 对象（引用）数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-3-%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">7.1.3 判断数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-4-%E5%85%B8%E5%9E%8B%E9%97%AE%E9%A2%98"><span class="toc-text">7.1.4 典型问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%87%BD%E6%95%B0"><span class="toc-text">7.2 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-%E5%87%BD%E6%95%B0%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">7.2.1 函数的概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-%E5%A6%82%E4%BD%95%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-text">7.2.2 如何调用函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-3-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-text">7.2.3 回调函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-4-IIFE%E5%87%BD%E6%95%B0"><span class="toc-text">7.2.4 IIFE函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-5-%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this"><span class="toc-text">7.2.5 函数中的this</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-6-%E5%88%86%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">7.2.6 分号的使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7"><span class="toc-text">8 函数高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-text">8.1 原型与原型链</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-1-%E5%8E%9F%E5%9E%8Bprototype"><span class="toc-text">8.1.1 原型prototype</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-%E6%98%BE%E5%BC%8F%E5%8E%9F%E5%9E%8B%E4%B8%8E%E9%9A%90%E5%BC%8F%E5%8E%9F%E5%9E%8B"><span class="toc-text">8.1.2 显式原型与隐式原型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-text">8.1.3 原型链</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%EF%BC%89-%E5%9F%BA%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-text">1） 基本说明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%EF%BC%89-%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%9B%BE%E7%A4%BA"><span class="toc-text">2） 原型链图示</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%EF%BC%89%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E5%8E%9F%E5%9E%8B-%E5%AE%9E%E4%BE%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%B3%E7%B3%BB-%E5%9B%BE%E8%A7%A3"><span class="toc-text">3）构造函数&#x2F;原型&#x2F;实例对象的关系(图解)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%EF%BC%89-%E5%B1%9E%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-text">4） 属性问题</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-4-instanceof"><span class="toc-text">8.1.4 instanceof</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-5-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">8.1.5 面试题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88"><span class="toc-text">8.2 执行上下文与执行上下文栈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-%E5%89%8D%E8%A8%80"><span class="toc-text">8.2.1 前言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2-%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87%E4%B8%8E%E5%87%BD%E6%95%B0%E6%8F%90%E5%8D%87"><span class="toc-text">8.2.2 变量提升与函数提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">8.2.3 执行上下文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-4-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88"><span class="toc-text">8.2.4 执行上下文栈</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-5-%E6%B5%8B%E8%AF%95%E9%A2%98"><span class="toc-text">8.2.5 测试题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-text">8.3 作用域与作用域链</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-1-%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">8.3.1 作用域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2-%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E8%81%94%E7%B3%BB"><span class="toc-text">8.3.2 作用域与执行上下文的区别与联系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-text">8.3.3 作用域链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-4-%E6%B5%8B%E8%AF%95%E9%A2%98"><span class="toc-text">8.3.4 测试题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E9%97%AD%E5%8C%85"><span class="toc-text">8.4 闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-1-%E9%97%AD%E5%8C%85%E6%A6%82%E5%BF%B5%E7%9A%84%E5%BC%95%E5%87%BA"><span class="toc-text">8.4.1 闭包概念的引出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-2-%E7%90%86%E8%A7%A3%E9%97%AD%E5%8C%85"><span class="toc-text">8.4.2 理解闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-3-%E5%B8%B8%E8%A7%81%E7%9A%84%E9%97%AD%E5%8C%85"><span class="toc-text">8.4.3 常见的闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-4-%E9%97%AD%E5%8C%85%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">8.4.4 闭包的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-5-%E9%97%AD%E5%8C%85%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">8.4.5 闭包的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-6-%E9%97%AD%E5%8C%85%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">8.4.6 闭包的应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-7-%E9%97%AD%E5%8C%85%E7%9A%84%E7%BC%BA%E7%82%B9%E5%8F%8A%E8%A7%A3%E5%86%B3"><span class="toc-text">8.4.7 闭包的缺点及解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-8-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E4%B8%8E%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F"><span class="toc-text">8.4.8 内存溢出与内存泄漏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-9-%E6%B5%8B%E8%AF%95%E9%A2%98"><span class="toc-text">8.4.9 测试题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7"><span class="toc-text">9 面向对象高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.1 对象创建模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-1-Object%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.1.1 Object构造函数模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-2-%E5%AF%B9%E8%B1%A1%E5%AD%97%E9%9D%A2%E9%87%8F%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.1.2 对象字面量模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-3-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.1.3 工厂模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.1.4 自定义构造函数模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-5-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E5%8E%9F%E5%9E%8B%E7%9A%84%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.1.5 构造函数+原型的组合模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E7%BB%A7%E6%89%BF%E6%A8%A1%E5%BC%8F"><span class="toc-text">9.2 继承模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-1-%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%BB%A7%E6%89%BF"><span class="toc-text">9.2.1 原型链继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-2-%E5%80%9F%E7%94%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%BB%A7%E6%89%BF"><span class="toc-text">9.2.2 借用构造函数继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-3-%E7%BB%84%E5%90%88%E7%BB%A7%E6%89%BF"><span class="toc-text">9.2.3 组合继承</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BA%BF%E7%A8%8B%E6%9C%BA%E5%88%B6%E5%92%8C%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6"><span class="toc-text">10 线程机制和事件机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B"><span class="toc-text">10.1 进程和线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8"><span class="toc-text">10.2 浏览器内核</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-1-%E4%B8%8D%E5%90%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8"><span class="toc-text">10.2.1 不同浏览器的内核</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-2-%E5%86%85%E6%A0%B8%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="toc-text">10.2.2 内核的模块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-text">10.3 定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-JS%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84"><span class="toc-text">10.4 JS是单线程的</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-4-1-%E5%A6%82%E4%BD%95%E8%AF%81%E6%98%8EJS%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E6%89%A7%E8%A1%8C"><span class="toc-text">10.4.1 如何证明JS是单线程执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-4-2-%E4%BB%A3%E7%A0%81%E5%88%86%E7%B1%BB%E5%92%8CJS%E5%BC%95%E6%93%8E%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">10.4.2 代码分类和JS引擎执行代码的基本流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%A8%A1%E5%9E%8BEvent-Loop"><span class="toc-text">10.5 事件循环模型Event Loop</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-1-%E6%A6%82%E8%BF%B0"><span class="toc-text">10.5.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-2-%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-text">10.5.2 相关概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-3-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">10.5.3 执行流程</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Kisugi Takumi</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">欢迎来到我的个人博客!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>